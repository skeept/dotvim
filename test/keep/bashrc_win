
alias c='command'
alias ls='ls --color'


#disable control flow
stty -ixon

function gi()
{
  local pattern=$1
  local def_loc="."
  shift
  if [[ -n "$@" ]]; then
    local def_loc=$@
  fi
  grep -iR --exclude={tags,*.{obj,idb,pdb,exe,dll,png,jpg,vlt,dat,tff,ico}} "${pattern}" ${def_loc}
}

function __args_to_win()
{
  path_util=wslpath
  ! [ -x "$(command -v $path_util)" ] && path_util=cygpath
  arg_list=
  while [[ -n $@ ]]; do
    curr_arg=$1
    if [[ $curr_arg == -* ]] || [[ $curr_arg == +* ]]; then
      arg_list="$arg_list $curr_arg"
    else
      arg_list="$arg_list $(${path_util} -a -w $curr_arg)"
    fi
    shift
  done
  arg_list="$(echo $arg_list | sed -e 's/^ *//' | sed -e 's/ *$//')"
  echo $arg_list
}

function __win_base()
{
  local cmd=$(command -v cmd.exe)
  echo "${cmd/\/Windows*/}"
}

function vg()
{
  gvim $(__args_to_win -u "${HOME}/vimfiles/simple.vim" --noplugins $@) &
}

function vdg()
{
  gvim.bat $(__args_to_win -u "${HOME}/vimfiles/simple.vim" --noplugins -d $@)
}

function gv()
{
  gvim.bat $(__args_to_win $@)
}

function gr()
{
  local _REMOTE_SILENT=" "
  if test "a$1" != "a"; then
    _REMOTE_SILENT='--remote-silent'
  fi
  gvim.bat $(__args_to_win ${_REMOTE_SILENT} $@)
}

function np()
{
  "$(__win_base)/Program Files/Notepad++/notepad++.exe" \
    $(__args_to_win $@) >& /dev/null &
}

xmlformat ()
{
  local temp_name=$(basename $(mktemp));
  if xmllint -format "$1" > ${temp_name}; then
    rm "$1";
    mv -i "${temp_name}" "$1";
  fi
}

e()
{
  unset gvim
  [ -x "$(command -v gvim)" ] && gvim=gvim
  [ -z ${gvim+x} ] && [ -x "$(command -v gvim.exe)" ] && gvim=gvim.exe
  "${gvim}" -c "RemoteOpenMod $(__args_to_win $@)" &
}


tc()
{
  local _TOTALCMD_PATH="$(__win_base)/Program Files/totalcmd/TOTALCMD64.EXE"
  [ -z "${_TOTALCMD_PATH}" ] && explorer.exe $@ && return

  # handle up to a couple arguments
  a1="$1"
  shift
  a2="$1"
  [ -z "$a1" ] && a1="."
  [ -e "${a1}" ] && a1="$(winpath "$a1")"
  [ -e "$a2" ] && a2="$(winpath "$a2")"

  [ -z "$a2" ] && left="/P=L"

  "${_TOTALCMD_PATH}" "$left" "$a1" "$a2"
}



if test ${BASH_VERSION:0:1} -ge 3 ; then dupremove; fi

# vim: set ft=bash:
