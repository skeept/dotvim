{{{1 default
@  Changeset 26:504f74154456dbb0e9441326514e42ce66279e62
|  Commited 11 Feb 2002 05:43 by A <a@example.com>
|  Tags: tip
|  Files: .hgignore, directory/file
|  @ Added .hgignore
|  @ Added directory/file
|  $  .hgignore      | 2 0
|  $  directory/file | 1 0
|  $2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
|  
o    Changeset 25:d8140c0b7b0b670bafe0891bcf0c4582092de884
|\   Commited 11 Feb 2002 05:00 by C <c@example.gov>
| |  Files: elines.lst, emerged.lst, flines.lst, glines.lst, glinescopy.lst
| |  Renamed elines.lst to emerged.lst
| |  Copied glines.lst to glinescopy.lst
| |  @ Merge
| |  $  elines.lst     |   0 19
| |  $  emerged.lst    | 127  0
| |  $  flines.lst     |   0  5
| |  $  glines.lst     |  73  0
| |  $  glinescopy.lst |  83  0
| |  $5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
| |  
o |  Changeset 24:e021c634413b240b8c834a85200acc28d645f1f1
| |  Commited 11 Feb 2002 04:15 by A <a@example.com>
| |  Files: elines.lst, flines.lst, glines.lst
| |  @ Added elines.lst with eplines
| |  @ Added flines.lst with frlines
| |  @ Added glines.lst with grlines
| |  $  elines.lst | 19 0
| |  $  flines.lst |  5 0
| |  $  glines.lst | 10 0
| |  $3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| |  
| o  Changeset 23:e1eaeea486e48634588c778fd36a81ac5c8869a6
|/   Commited 11 Feb 2002 04:15 by A <a@example.com>
|    Files: elines.lst, flines.lst, glines.lst
|    @ Added elines.lst, flines.lst and glines.lst
|    $  elines.lst |  88 0
|    $  flines.lst |  12 0
|    $  glines.lst |  59 0
|    $3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  Changeset 22:5afd628b0861f6447ed813895d5ced58a1c42a72
|  Commited 11 Feb 2002 03:16 by A <a@example.com>
|  Files: .hgtags
|  @ Added tag oldtag for changeset 023aa55bd806
|  $  .hgtags | 1 0
|  $1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
|  
o  Changeset 21:e85aa09aab1621b59b8be37f723410b219c8599c
|  Commited 11 Feb 2002 03:15 by A <a@example.com>
|  Files: ignored10.lst
|  @ Added ignored10.lst
|  $  ignored10.lst | 10 0
|  $1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
|  
o  Changeset 20:67cf252de26b12da6769114cc89b793357f5a46a
|  Commited 10 Feb 2002 16:01 by B <b@example.org>
|  Files: nohglinesrev.lst
|  @ Added nohglinesrev.lst
|  $  nohglinesrev.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
|  
o  Changeset 19:456e0b05b81af4f332405336f11df4769ec9f250
|  Commited 10 Feb 2002 15:33 by B <b@example.org>
|  Files: nohglines.lst
|  @ Added nohglines.lst
|  $  nohglines.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  Changeset 18:f44a21859e57e4abc6155da804d08dd5069e798e
|  Commited 10 Feb 2002 05:00 by A <a@example.com>
|  Files: hglines2.lst
|  Copied hglines.lst to hglines2.lst
|  @ Copied “hglines.lst” to “hglines2.lst”
|  $  hglines2.lst | 41 0
|  $1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o    Changeset 17:e5648a3eea574f3fc03709b4fdd799a38f649edd
|\   Commited 01 Jan 2002 00:00 by C <c@example.gov>
| |  @ Merge from A
| |  $  clines.lst | 49 0
| |  $1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
| |  
o |    Changeset 16:462a1e95be86f96aaf6d7360f6f770826c3eb641
|\ \   Commited 01 Jan 2002 00:00 by C <c@example.gov>
| | |  @ Merge from C:1
| | |  $  .hgtags    |  1 0
| | |  $  blines.lst | 16 0
| | |  $2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | |  
| | o    Changeset 15:be92227e3e43f4e7402408afe110098d209d2568 (branch A)
| | |\   Commited 01 Jan 2002 00:00 by C <c@example.gov>
| | | |  @ Merge from C:2
| | | |  $  .hgtags     |  1 0
| | | |  $  ablines.lst | 13 0
| | | |  $  blines.lst  | 16 0
| | | |  $  clines.lst  | 49 0
| | | |  $4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | | |  
| | o |    Changeset 14:5e2f73d0c01dfb8ee0d3577e03d016a5f6df58b1 (branch A)
| | |\ \   Commited 01 Jan 2002 00:00 by C <c@example.gov>
| | | | |  @ Merge from B
| | | | |  $  alines.lst | 64 0
| | | | |  $1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | |  
| | | | | o  Changeset 13:14b19ea42f824c8597f8358149c5ba994299a410 (branch C)
| | | | |/   Commited 01 Feb 2001 14:56 by B <b@example.org>
| | | | |    Files: .hgtags
| | | | |    @ Added tag clines for changeset 023aa55bd806
| | | | |    $  .hgtags | 1 0
| | | | |    $1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| | | | |    
| +-----o  Changeset 12:023aa55bd8062179ce36adbdd78363e9b88718c1 (branch C)
| | | |    Commited 01 Feb 2001 14:56 by B <b@example.org>
| | | |    Tags: clines, oldtag
| | | |    Files: clines.lst
| | | |    @ Added clines.lst
| | | |    $  clines.lst | 49 0
| | | |    $1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| | | |    
| +-----o  Changeset 11:0e6e0adf281b423193f9dce097ab1df4f91215f7 (branch C)
| | | |    Commited 01 Feb 2001 05:19 by A <a@example.com>
| | | |    Files: .hgtags
| | | |    @ Added tag blines for changeset c4110a066208
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| | | |    
| o | |  Changeset 10:c4110a066208167dae46b08f4e0d8d2b37e842f3 (branch C)
| | | |  Commited 01 Feb 2001 05:18 by A <a@example.com>
| | | |  Tags: blines
| | | |  Files: blines.lst
| | | |  @ Added blines.lst
| | | |  $  blines.lst | 16 0
| | | |  $1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
| | | |  
o | | |    Changeset 9:269399222040415b3928a316f5d28792cc0be4dd
|\ \ \ \   Commited 01 Jan 2001 00:00 by C <c@example.gov>
| | | | |  @ Merge from C
| | | | |  $  ablines.lst |  13 0
| | | | |  $  alines.lst  |  64 0
| | | | |  $  dlines.lst  |  52 0
| | | | |  $3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | | | |  
| | o | |  Changeset 8:250ba7cd831ee91c3ba5bef1faebc38c5dbca5f8 (branch C)
| |/ / /   Commited 02 Nov 2000 14:14 by B <b@example.org>
| | | |    Files: .hgtags
| | | |    @ Added tag ablines for changeset c06107b7bcbe
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| | | |    
| o---+  Changeset 7:c06107b7bcbe751d2dd40faf4179ee7d6aac44ac (branch C)
|   | |  Commited 02 Nov 2000 14:13 by B <b@example.org>
|  / /   Tags: ablines
| | |    Files: ablines.lst
| | |    @ Added ablines.lst
| | |    $  ablines.lst | 13 0
| | |    $1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | |    
| | o  Changeset 6:9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe (branch B)
| |/   Commited 02 Nov 2000 05:44 by A <a@example.com>
| |    Files: alines.lst
| |    @ Added alines.lst
| |    $  alines.lst | 64 0
| |    $1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| |    
| o  Changeset 5:d760b0fe4fe45adf585f5030181b8081899e26a9 (branch A)
|/   Commited 01 Nov 2000 13:24 by B <b@example.org>
|    Files: dlines.lst
|    @ Added dlines.lst
|    $  dlines.lst | 52 0
|    $1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  Changeset 4:7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac
|  Commited 10 May 2000 04:23 by A <a@example.com>
|  Files: datelines.lst, hglines.lst
|  @ Added «hglines.lst» and «datelines.lst»
|  $  datelines.lst | 41 0
|  $  hglines.lst   | 41 0
|  $2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o  Changeset 3:a16a47a8d7aafc115651bfee6f1202093765365d
|  Commited 01 Feb 2000 14:00 by B <b@example.org>
|  Files: chgrepo.zsh, crepo.zsh
|  Renamed crepo.zsh to chgrepo.zsh
|  @ Renamed «crepo.zsh» to «chgrepo.zsh»
|  $  chgrepo.zsh | 94  0
|  $  crepo.zsh   |  0 94
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
|  
o  Changeset 2:5a6a1bf999fad1f4547eeb887af54f31d11833f2
|  Commited 15 Jan 2000 15:00 by B <b@example.org>
|  Files: crepo.zsh
|  @ Replaced
|  @     (
|  @         ...
|  @     )
|  @ with
|  @     {
|  @         ...
|  @     }
|  $  crepo.zsh | 4 4
|  $1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
|  
o  Changeset 1:dfe39aa48c6ddde158e42217548b531a45ff66e9
|  Commited 05 Jan 2000 07:30 by A <a@example.com>
|  Files: createrepo.zsh, crepo.zsh
|  Renamed createrepo.zsh to crepo.zsh
|  @ Renamed «createrepo.zsh» to «crepo.zsh»
|  $  createrepo.zsh |  0 94
|  $  crepo.zsh      | 94  0
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  Changeset 0:99ea42d70fbe32af955de907352999b1d94bef5f
|  Commited 02 Jan 1999 05:20 by A <a@example.com>
|  Files: createrepo.zsh
|  @ Added «createrepo.zsh»
|  $  createrepo.zsh | 94 0
|  $1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
{{{1 hgdef
@  changeset:   26:504f74154456dbb0e9441326514e42ce66279e62
|  tag:         tip
|  user:        A <a@example.com>
|  date:        Mon Feb 11 05:43:00 2002
|  files:       .hgignore directory/file
|  summary:     Added .hgignore
|  $  .hgignore      | 2 0
|  $  directory/file | 1 0
|  $2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
|  
o    changeset:   25:d8140c0b7b0b670bafe0891bcf0c4582092de884
|\   user:        C <c@example.gov>
| |  date:        Mon Feb 11 05:00:00 2002
| |  files:       elines.lst emerged.lst flines.lst glines.lst glinescopy.lst
| |  summary:     Merge
| |  $  elines.lst     |   0 19
| |  $  emerged.lst    | 127  0
| |  $  flines.lst     |   0  5
| |  $  glines.lst     |  73  0
| |  $  glinescopy.lst |  83  0
| |  $5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
| |  
o |  changeset:   24:e021c634413b240b8c834a85200acc28d645f1f1
| |  user:        A <a@example.com>
| |  date:        Mon Feb 11 04:15:00 2002
| |  files:       elines.lst flines.lst glines.lst
| |  summary:     Added elines.lst with eplines
| |  $  elines.lst | 19 0
| |  $  flines.lst |  5 0
| |  $  glines.lst | 10 0
| |  $3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| |  
| o  changeset:   23:e1eaeea486e48634588c778fd36a81ac5c8869a6
|/   user:        A <a@example.com>
|    date:        Mon Feb 11 04:15:00 2002
|    files:       elines.lst flines.lst glines.lst
|    summary:     Added elines.lst, flines.lst and glines.lst
|    $  elines.lst |  88 0
|    $  flines.lst |  12 0
|    $  glines.lst |  59 0
|    $3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  changeset:   22:5afd628b0861f6447ed813895d5ced58a1c42a72
|  user:        A <a@example.com>
|  date:        Mon Feb 11 03:16:00 2002
|  files:       .hgtags
|  summary:     Added tag oldtag for changeset 023aa55bd806
|  $  .hgtags | 1 0
|  $1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
|  
o  changeset:   21:e85aa09aab1621b59b8be37f723410b219c8599c
|  user:        A <a@example.com>
|  date:        Mon Feb 11 03:15:00 2002
|  files:       ignored10.lst
|  summary:     Added ignored10.lst
|  $  ignored10.lst | 10 0
|  $1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
|  
o  changeset:   20:67cf252de26b12da6769114cc89b793357f5a46a
|  user:        B <b@example.org>
|  date:        Sun Feb 10 16:01:00 2002
|  files:       nohglinesrev.lst
|  summary:     Added nohglinesrev.lst
|  $  nohglinesrev.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
|  
o  changeset:   19:456e0b05b81af4f332405336f11df4769ec9f250
|  user:        B <b@example.org>
|  date:        Sun Feb 10 15:33:00 2002
|  files:       nohglines.lst
|  summary:     Added nohglines.lst
|  $  nohglines.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  changeset:   18:f44a21859e57e4abc6155da804d08dd5069e798e
|  user:        A <a@example.com>
|  date:        Sun Feb 10 05:00:00 2002
|  files:       hglines2.lst
|  summary:     Copied “hglines.lst” to “hglines2.lst”
|  $  hglines2.lst | 41 0
|  $1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o    changeset:   17:e5648a3eea574f3fc03709b4fdd799a38f649edd
|\   user:        C <c@example.gov>
| |  date:        Tue Jan 01 00:00:45 2002
| |  summary:     Merge from A
| |  $  clines.lst | 49 0
| |  $1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
| |  
o |    changeset:   16:462a1e95be86f96aaf6d7360f6f770826c3eb641
|\ \   user:        C <c@example.gov>
| | |  date:        Tue Jan 01 00:00:30 2002
| | |  summary:     Merge from C:1
| | |  $  .hgtags    |  1 0
| | |  $  blines.lst | 16 0
| | |  $2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | |  
| | o    changeset:   15:be92227e3e43f4e7402408afe110098d209d2568
| | |\   branch:      A
| | | |  user:        C <c@example.gov>
| | | |  date:        Tue Jan 01 00:00:15 2002
| | | |  summary:     Merge from C:2
| | | |  $  .hgtags     |  1 0
| | | |  $  ablines.lst | 13 0
| | | |  $  blines.lst  | 16 0
| | | |  $  clines.lst  | 49 0
| | | |  $4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | | |  
| | o |    changeset:   14:5e2f73d0c01dfb8ee0d3577e03d016a5f6df58b1
| | |\ \   branch:      A
| | | | |  user:        C <c@example.gov>
| | | | |  date:        Tue Jan 01 00:00:00 2002
| | | | |  summary:     Merge from B
| | | | |  $  alines.lst | 64 0
| | | | |  $1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | |  
| | | | | o  changeset:   13:14b19ea42f824c8597f8358149c5ba994299a410
| | | | |/   branch:      C
| | | | |    user:        B <b@example.org>
| | | | |    date:        Thu Feb 01 14:56:52 2001
| | | | |    files:       .hgtags
| | | | |    summary:     Added tag clines for changeset 023aa55bd806
| | | | |    $  .hgtags | 1 0
| | | | |    $1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| | | | |    
| +-----o  changeset:   12:023aa55bd8062179ce36adbdd78363e9b88718c1
| | | |    branch:      C
| | | |    tag:         clines
| | | |    tag:         oldtag
| | | |    user:        B <b@example.org>
| | | |    date:        Thu Feb 01 14:56:00 2001
| | | |    files:       clines.lst
| | | |    summary:     Added clines.lst
| | | |    $  clines.lst | 49 0
| | | |    $1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| | | |    
| +-----o  changeset:   11:0e6e0adf281b423193f9dce097ab1df4f91215f7
| | | |    branch:      C
| | | |    user:        A <a@example.com>
| | | |    date:        Thu Feb 01 05:19:00 2001
| | | |    files:       .hgtags
| | | |    summary:     Added tag blines for changeset c4110a066208
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| | | |    
| o | |  changeset:   10:c4110a066208167dae46b08f4e0d8d2b37e842f3
| | | |  branch:      C
| | | |  tag:         blines
| | | |  user:        A <a@example.com>
| | | |  date:        Thu Feb 01 05:18:00 2001
| | | |  files:       blines.lst
| | | |  summary:     Added blines.lst
| | | |  $  blines.lst | 16 0
| | | |  $1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
| | | |  
o | | |    changeset:   9:269399222040415b3928a316f5d28792cc0be4dd
|\ \ \ \   user:        C <c@example.gov>
| | | | |  date:        Mon Jan 01 00:00:00 2001
| | | | |  summary:     Merge from C
| | | | |  $  ablines.lst |  13 0
| | | | |  $  alines.lst  |  64 0
| | | | |  $  dlines.lst  |  52 0
| | | | |  $3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | | | |  
| | o | |  changeset:   8:250ba7cd831ee91c3ba5bef1faebc38c5dbca5f8
| |/ / /   branch:      C
| | | |    user:        B <b@example.org>
| | | |    date:        Thu Nov 02 14:14:00 2000
| | | |    files:       .hgtags
| | | |    summary:     Added tag ablines for changeset c06107b7bcbe
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| | | |    
| o---+  changeset:   7:c06107b7bcbe751d2dd40faf4179ee7d6aac44ac
|   | |  branch:      C
|  / /   tag:         ablines
| | |    user:        B <b@example.org>
| | |    date:        Thu Nov 02 14:13:00 2000
| | |    files:       ablines.lst
| | |    summary:     Added ablines.lst
| | |    $  ablines.lst | 13 0
| | |    $1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | |    
| | o  changeset:   6:9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe
| |/   branch:      B
| |    user:        A <a@example.com>
| |    date:        Thu Nov 02 05:44:00 2000
| |    files:       alines.lst
| |    summary:     Added alines.lst
| |    $  alines.lst | 64 0
| |    $1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| |    
| o  changeset:   5:d760b0fe4fe45adf585f5030181b8081899e26a9
|/   branch:      A
|    user:        B <b@example.org>
|    date:        Wed Nov 01 13:24:00 2000
|    files:       dlines.lst
|    summary:     Added dlines.lst
|    $  dlines.lst | 52 0
|    $1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  changeset:   4:7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac
|  user:        A <a@example.com>
|  date:        Wed May 10 04:23:00 2000
|  files:       datelines.lst hglines.lst
|  summary:     Added «hglines.lst» and «datelines.lst»
|  $  datelines.lst | 41 0
|  $  hglines.lst   | 41 0
|  $2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o  changeset:   3:a16a47a8d7aafc115651bfee6f1202093765365d
|  user:        B <b@example.org>
|  date:        Tue Feb 01 14:00:00 2000
|  files:       chgrepo.zsh crepo.zsh
|  summary:     Renamed «crepo.zsh» to «chgrepo.zsh»
|  $  chgrepo.zsh | 94  0
|  $  crepo.zsh   |  0 94
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
|  
o  changeset:   2:5a6a1bf999fad1f4547eeb887af54f31d11833f2
|  user:        B <b@example.org>
|  date:        Sat Jan 15 15:00:00 2000
|  files:       crepo.zsh
|  summary:     Replaced
|  $  crepo.zsh | 4 4
|  $1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
|  
o  changeset:   1:dfe39aa48c6ddde158e42217548b531a45ff66e9
|  user:        A <a@example.com>
|  date:        Wed Jan 05 07:30:00 2000
|  files:       createrepo.zsh crepo.zsh
|  summary:     Renamed «createrepo.zsh» to «crepo.zsh»
|  $  createrepo.zsh |  0 94
|  $  crepo.zsh      | 94  0
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  changeset:   0:99ea42d70fbe32af955de907352999b1d94bef5f
|  user:        A <a@example.com>
|  date:        Sat Jan 02 05:20:00 1999
|  files:       createrepo.zsh
|  summary:     Added «createrepo.zsh»
|  $  createrepo.zsh | 94 0
|  $1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
{{{1 hgdescr
@  changeset:   26:504f74154456dbb0e9441326514e42ce66279e62
|  tag:         tip
|  user:        A <a@example.com>
|  date:        Mon Feb 11 05:43:00 2002
|  files:       .hgignore directory/file
|  description:
|  Added .hgignore
|  Added directory/file
|  $  .hgignore      | 2 0
|  $  directory/file | 1 0
|  $2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
|  
o    changeset:   25:d8140c0b7b0b670bafe0891bcf0c4582092de884
|\   user:        C <c@example.gov>
| |  date:        Mon Feb 11 05:00:00 2002
| |  files:       elines.lst emerged.lst flines.lst glines.lst glinescopy.lst
| |  description:
| |  Merge
| |  $  elines.lst     |   0 19
| |  $  emerged.lst    | 127  0
| |  $  flines.lst     |   0  5
| |  $  glines.lst     |  73  0
| |  $  glinescopy.lst |  83  0
| |  $5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
| |  
o |  changeset:   24:e021c634413b240b8c834a85200acc28d645f1f1
| |  user:        A <a@example.com>
| |  date:        Mon Feb 11 04:15:00 2002
| |  files:       elines.lst flines.lst glines.lst
| |  description:
| |  Added elines.lst with eplines
| |  Added flines.lst with frlines
| |  Added glines.lst with grlines
| |  $  elines.lst | 19 0
| |  $  flines.lst |  5 0
| |  $  glines.lst | 10 0
| |  $3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| |  
| o  changeset:   23:e1eaeea486e48634588c778fd36a81ac5c8869a6
|/   user:        A <a@example.com>
|    date:        Mon Feb 11 04:15:00 2002
|    files:       elines.lst flines.lst glines.lst
|    description:
|    Added elines.lst, flines.lst and glines.lst
|    $  elines.lst |  88 0
|    $  flines.lst |  12 0
|    $  glines.lst |  59 0
|    $3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  changeset:   22:5afd628b0861f6447ed813895d5ced58a1c42a72
|  user:        A <a@example.com>
|  date:        Mon Feb 11 03:16:00 2002
|  files:       .hgtags
|  description:
|  Added tag oldtag for changeset 023aa55bd806
|  $  .hgtags | 1 0
|  $1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
|  
o  changeset:   21:e85aa09aab1621b59b8be37f723410b219c8599c
|  user:        A <a@example.com>
|  date:        Mon Feb 11 03:15:00 2002
|  files:       ignored10.lst
|  description:
|  Added ignored10.lst
|  $  ignored10.lst | 10 0
|  $1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
|  
o  changeset:   20:67cf252de26b12da6769114cc89b793357f5a46a
|  user:        B <b@example.org>
|  date:        Sun Feb 10 16:01:00 2002
|  files:       nohglinesrev.lst
|  description:
|  Added nohglinesrev.lst
|  $  nohglinesrev.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
|  
o  changeset:   19:456e0b05b81af4f332405336f11df4769ec9f250
|  user:        B <b@example.org>
|  date:        Sun Feb 10 15:33:00 2002
|  files:       nohglines.lst
|  description:
|  Added nohglines.lst
|  $  nohglines.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  changeset:   18:f44a21859e57e4abc6155da804d08dd5069e798e
|  user:        A <a@example.com>
|  date:        Sun Feb 10 05:00:00 2002
|  files:       hglines2.lst
|  description:
|  Copied “hglines.lst” to “hglines2.lst”
|  $  hglines2.lst | 41 0
|  $1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o    changeset:   17:e5648a3eea574f3fc03709b4fdd799a38f649edd
|\   user:        C <c@example.gov>
| |  date:        Tue Jan 01 00:00:45 2002
| |  description:
| |  Merge from A
| |  $  clines.lst | 49 0
| |  $1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
| |  
o |    changeset:   16:462a1e95be86f96aaf6d7360f6f770826c3eb641
|\ \   user:        C <c@example.gov>
| | |  date:        Tue Jan 01 00:00:30 2002
| | |  description:
| | |  Merge from C:1
| | |  $  .hgtags    |  1 0
| | |  $  blines.lst | 16 0
| | |  $2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | |  
| | o    changeset:   15:be92227e3e43f4e7402408afe110098d209d2568
| | |\   branch:      A
| | | |  user:        C <c@example.gov>
| | | |  date:        Tue Jan 01 00:00:15 2002
| | | |  description:
| | | |  Merge from C:2
| | | |  $  .hgtags     |  1 0
| | | |  $  ablines.lst | 13 0
| | | |  $  blines.lst  | 16 0
| | | |  $  clines.lst  | 49 0
| | | |  $4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | | |  
| | o |    changeset:   14:5e2f73d0c01dfb8ee0d3577e03d016a5f6df58b1
| | |\ \   branch:      A
| | | | |  user:        C <c@example.gov>
| | | | |  date:        Tue Jan 01 00:00:00 2002
| | | | |  description:
| | | | |  Merge from B
| | | | |  $  alines.lst | 64 0
| | | | |  $1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | |  
| | | | | o  changeset:   13:14b19ea42f824c8597f8358149c5ba994299a410
| | | | |/   branch:      C
| | | | |    user:        B <b@example.org>
| | | | |    date:        Thu Feb 01 14:56:52 2001
| | | | |    files:       .hgtags
| | | | |    description:
| | | | |    Added tag clines for changeset 023aa55bd806
| | | | |    $  .hgtags | 1 0
| | | | |    $1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| | | | |    
| +-----o  changeset:   12:023aa55bd8062179ce36adbdd78363e9b88718c1
| | | |    branch:      C
| | | |    tag:         clines
| | | |    tag:         oldtag
| | | |    user:        B <b@example.org>
| | | |    date:        Thu Feb 01 14:56:00 2001
| | | |    files:       clines.lst
| | | |    description:
| | | |    Added clines.lst
| | | |    $  clines.lst | 49 0
| | | |    $1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| | | |    
| +-----o  changeset:   11:0e6e0adf281b423193f9dce097ab1df4f91215f7
| | | |    branch:      C
| | | |    user:        A <a@example.com>
| | | |    date:        Thu Feb 01 05:19:00 2001
| | | |    files:       .hgtags
| | | |    description:
| | | |    Added tag blines for changeset c4110a066208
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| | | |    
| o | |  changeset:   10:c4110a066208167dae46b08f4e0d8d2b37e842f3
| | | |  branch:      C
| | | |  tag:         blines
| | | |  user:        A <a@example.com>
| | | |  date:        Thu Feb 01 05:18:00 2001
| | | |  files:       blines.lst
| | | |  description:
| | | |  Added blines.lst
| | | |  $  blines.lst | 16 0
| | | |  $1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
| | | |  
o | | |    changeset:   9:269399222040415b3928a316f5d28792cc0be4dd
|\ \ \ \   user:        C <c@example.gov>
| | | | |  date:        Mon Jan 01 00:00:00 2001
| | | | |  description:
| | | | |  Merge from C
| | | | |  $  ablines.lst |  13 0
| | | | |  $  alines.lst  |  64 0
| | | | |  $  dlines.lst  |  52 0
| | | | |  $3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | | | |  
| | o | |  changeset:   8:250ba7cd831ee91c3ba5bef1faebc38c5dbca5f8
| |/ / /   branch:      C
| | | |    user:        B <b@example.org>
| | | |    date:        Thu Nov 02 14:14:00 2000
| | | |    files:       .hgtags
| | | |    description:
| | | |    Added tag ablines for changeset c06107b7bcbe
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| | | |    
| o---+  changeset:   7:c06107b7bcbe751d2dd40faf4179ee7d6aac44ac
|   | |  branch:      C
|  / /   tag:         ablines
| | |    user:        B <b@example.org>
| | |    date:        Thu Nov 02 14:13:00 2000
| | |    files:       ablines.lst
| | |    description:
| | |    Added ablines.lst
| | |    $  ablines.lst | 13 0
| | |    $1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | |    
| | o  changeset:   6:9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe
| |/   branch:      B
| |    user:        A <a@example.com>
| |    date:        Thu Nov 02 05:44:00 2000
| |    files:       alines.lst
| |    description:
| |    Added alines.lst
| |    $  alines.lst | 64 0
| |    $1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| |    
| o  changeset:   5:d760b0fe4fe45adf585f5030181b8081899e26a9
|/   branch:      A
|    user:        B <b@example.org>
|    date:        Wed Nov 01 13:24:00 2000
|    files:       dlines.lst
|    description:
|    Added dlines.lst
|    $  dlines.lst | 52 0
|    $1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  changeset:   4:7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac
|  user:        A <a@example.com>
|  date:        Wed May 10 04:23:00 2000
|  files:       datelines.lst hglines.lst
|  description:
|  Added «hglines.lst» and «datelines.lst»
|  $  datelines.lst | 41 0
|  $  hglines.lst   | 41 0
|  $2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o  changeset:   3:a16a47a8d7aafc115651bfee6f1202093765365d
|  user:        B <b@example.org>
|  date:        Tue Feb 01 14:00:00 2000
|  files:       chgrepo.zsh crepo.zsh
|  description:
|  Renamed «crepo.zsh» to «chgrepo.zsh»
|  $  chgrepo.zsh | 94  0
|  $  crepo.zsh   |  0 94
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
|  
o  changeset:   2:5a6a1bf999fad1f4547eeb887af54f31d11833f2
|  user:        B <b@example.org>
|  date:        Sat Jan 15 15:00:00 2000
|  files:       crepo.zsh
|  description:
|  Replaced
|      (
|          ...
|      )
|  with
|      {
|          ...
|      }
|  $  crepo.zsh | 4 4
|  $1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
|  
o  changeset:   1:dfe39aa48c6ddde158e42217548b531a45ff66e9
|  user:        A <a@example.com>
|  date:        Wed Jan 05 07:30:00 2000
|  files:       createrepo.zsh crepo.zsh
|  description:
|  Renamed «createrepo.zsh» to «crepo.zsh»
|  $  createrepo.zsh |  0 94
|  $  crepo.zsh      | 94  0
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  changeset:   0:99ea42d70fbe32af955de907352999b1d94bef5f
|  user:        A <a@example.com>
|  date:        Sat Jan 02 05:20:00 1999
|  files:       createrepo.zsh
|  description:
|  Added «createrepo.zsh»
|  $  createrepo.zsh | 94 0
|  $1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
{{{1 compact
@  26[tip]   504f74154456dbb0e9441326514e42ce66279e62 2002-02-11 05:43 A <a@example.com>
|    Added .hgignore
|  $   .hgignore      | 2 0
|  $   directory/file | 1 0
|  $ 2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
|  
o    25   d8140c0b7b0b670bafe0891bcf0c4582092de884 2002-02-11 05:00 C <c@example.gov>
|\     Merge
| |  $   elines.lst     |   0 19
| |  $   emerged.lst    | 127  0
| |  $   flines.lst     |   0  5
| |  $   glines.lst     |  73  0
| |  $   glinescopy.lst |  83  0
| |  $ 5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
| |  
o |  24   e021c634413b240b8c834a85200acc28d645f1f1 2002-02-11 04:15 A <a@example.com>
| |    Added elines.lst with eplines
| |  $   elines.lst | 19 0
| |  $   flines.lst |  5 0
| |  $   glines.lst | 10 0
| |  $ 3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| |  
| o  23   e1eaeea486e48634588c778fd36a81ac5c8869a6 2002-02-11 04:15 A <a@example.com>
|/     Added elines.lst, flines.lst and glines.lst
|    $   elines.lst |  88 0
|    $   flines.lst |  12 0
|    $   glines.lst |  59 0
|    $ 3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  22   5afd628b0861f6447ed813895d5ced58a1c42a72 2002-02-11 03:16 A <a@example.com>
|    Added tag oldtag for changeset 023aa55bd806
|  $   .hgtags | 1 0
|  $ 1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
|  
o  21   e85aa09aab1621b59b8be37f723410b219c8599c 2002-02-11 03:15 A <a@example.com>
|    Added ignored10.lst
|  $   ignored10.lst | 10 0
|  $ 1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
|  
o  20   67cf252de26b12da6769114cc89b793357f5a46a 2002-02-10 16:01 B <b@example.org>
|    Added nohglinesrev.lst
|  $   nohglinesrev.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
|  
o  19   456e0b05b81af4f332405336f11df4769ec9f250 2002-02-10 15:33 B <b@example.org>
|    Added nohglines.lst
|  $   nohglines.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  18   f44a21859e57e4abc6155da804d08dd5069e798e 2002-02-10 05:00 A <a@example.com>
|    Copied “hglines.lst” to “hglines2.lst”
|  $   hglines2.lst | 41 0
|  $ 1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o    17   e5648a3eea574f3fc03709b4fdd799a38f649edd 2002-01-01 00:00 C <c@example.gov>
|\     Merge from A
| |  $   clines.lst | 49 0
| |  $ 1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
| |  
o |    16   462a1e95be86f96aaf6d7360f6f770826c3eb641 2002-01-01 00:00 C <c@example.gov>
|\ \     Merge from C:1
| | |  $   .hgtags    |  1 0
| | |  $   blines.lst | 16 0
| | |  $ 2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | |  
| | o    15   be92227e3e43f4e7402408afe110098d209d2568 2002-01-01 00:00 C <c@example.gov>
| | |\     Merge from C:2
| | | |  $   .hgtags     |  1 0
| | | |  $   ablines.lst | 13 0
| | | |  $   blines.lst  | 16 0
| | | |  $   clines.lst  | 49 0
| | | |  $ 4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | | |  
| | o |    14   5e2f73d0c01dfb8ee0d3577e03d016a5f6df58b1 2002-01-01 00:00 C <c@example.gov>
| | |\ \     Merge from B
| | | | |  $   alines.lst | 64 0
| | | | |  $ 1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | |  
| | | | | o  13   14b19ea42f824c8597f8358149c5ba994299a410 2001-02-01 14:56 B <b@example.org>
| | | | |/     Added tag clines for changeset 023aa55bd806
| | | | |    $   .hgtags | 1 0
| | | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| | | | |    
| +-----o  12[clines, oldtag]   023aa55bd8062179ce36adbdd78363e9b88718c1 2001-02-01 14:56 B <b@example.org>
| | | |      Added clines.lst
| | | |    $   clines.lst | 49 0
| | | |    $ 1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| | | |    
| +-----o  11   0e6e0adf281b423193f9dce097ab1df4f91215f7 2001-02-01 05:19 A <a@example.com>
| | | |      Added tag blines for changeset c4110a066208
| | | |    $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| | | |    
| o | |  10[blines]   c4110a066208167dae46b08f4e0d8d2b37e842f3 2001-02-01 05:18 A <a@example.com>
| | | |    Added blines.lst
| | | |  $   blines.lst | 16 0
| | | |  $ 1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
| | | |  
o | | |    9   269399222040415b3928a316f5d28792cc0be4dd 2001-01-01 00:00 C <c@example.gov>
|\ \ \ \     Merge from C
| | | | |  $   ablines.lst |  13 0
| | | | |  $   alines.lst  |  64 0
| | | | |  $   dlines.lst  |  52 0
| | | | |  $ 3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | | | |  
| | o | |  8   250ba7cd831ee91c3ba5bef1faebc38c5dbca5f8 2000-11-02 14:14 B <b@example.org>
| |/ / /     Added tag ablines for changeset c06107b7bcbe
| | | |    $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| | | |    
| o---+  7[ablines]   c06107b7bcbe751d2dd40faf4179ee7d6aac44ac 2000-11-02 14:13 B <b@example.org>
|   | |    Added ablines.lst
|  / /   $   ablines.lst | 13 0
| | |    $ 1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | |    
| | o  6   9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe 2000-11-02 05:44 A <a@example.com>
| |/     Added alines.lst
| |    $   alines.lst | 64 0
| |    $ 1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| |    
| o  5   d760b0fe4fe45adf585f5030181b8081899e26a9 2000-11-01 13:24 B <b@example.org>
|/     Added dlines.lst
|    $   dlines.lst | 52 0
|    $ 1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  4   7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac 2000-05-10 04:23 A <a@example.com>
|    Added «hglines.lst» and «datelines.lst»
|  $   datelines.lst | 41 0
|  $   hglines.lst   | 41 0
|  $ 2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o  3   a16a47a8d7aafc115651bfee6f1202093765365d 2000-02-01 14:00 B <b@example.org>
|    Renamed «crepo.zsh» to «chgrepo.zsh»
|  $   chgrepo.zsh | 94  0
|  $   crepo.zsh   |  0 94
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
|  
o  2   5a6a1bf999fad1f4547eeb887af54f31d11833f2 2000-01-15 15:00 B <b@example.org>
|    Replaced
|  $   crepo.zsh | 4 4
|  $ 1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
|  
o  1   dfe39aa48c6ddde158e42217548b531a45ff66e9 2000-01-05 07:30 A <a@example.com>
|    Renamed «createrepo.zsh» to «crepo.zsh»
|  $   createrepo.zsh |  0 94
|  $   crepo.zsh      | 94  0
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  0   99ea42d70fbe32af955de907352999b1d94bef5f 1999-01-02 05:20 A <a@example.com>
|    Added «createrepo.zsh»
|  $   createrepo.zsh | 94 0
|  $ 1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
{{{1 cdescr
@  26[tip]   504f74154456dbb0e9441326514e42ce66279e62 2002-02-11 05:43 A <a@example.com>
|    Added .hgignore
|    Added directory/file
|  $   .hgignore      | 2 0
|  $   directory/file | 1 0
|  $ 2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
|  
o    25   d8140c0b7b0b670bafe0891bcf0c4582092de884 2002-02-11 05:00 C <c@example.gov>
|\     Merge
| |  $   elines.lst     |   0 19
| |  $   emerged.lst    | 127  0
| |  $   flines.lst     |   0  5
| |  $   glines.lst     |  73  0
| |  $   glinescopy.lst |  83  0
| |  $ 5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
| |  
o |  24   e021c634413b240b8c834a85200acc28d645f1f1 2002-02-11 04:15 A <a@example.com>
| |    Added elines.lst with eplines
| |    Added flines.lst with frlines
| |    Added glines.lst with grlines
| |  $   elines.lst | 19 0
| |  $   flines.lst |  5 0
| |  $   glines.lst | 10 0
| |  $ 3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| |  
| o  23   e1eaeea486e48634588c778fd36a81ac5c8869a6 2002-02-11 04:15 A <a@example.com>
|/     Added elines.lst, flines.lst and glines.lst
|    $   elines.lst |  88 0
|    $   flines.lst |  12 0
|    $   glines.lst |  59 0
|    $ 3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  22   5afd628b0861f6447ed813895d5ced58a1c42a72 2002-02-11 03:16 A <a@example.com>
|    Added tag oldtag for changeset 023aa55bd806
|  $   .hgtags | 1 0
|  $ 1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
|  
o  21   e85aa09aab1621b59b8be37f723410b219c8599c 2002-02-11 03:15 A <a@example.com>
|    Added ignored10.lst
|  $   ignored10.lst | 10 0
|  $ 1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
|  
o  20   67cf252de26b12da6769114cc89b793357f5a46a 2002-02-10 16:01 B <b@example.org>
|    Added nohglinesrev.lst
|  $   nohglinesrev.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
|  
o  19   456e0b05b81af4f332405336f11df4769ec9f250 2002-02-10 15:33 B <b@example.org>
|    Added nohglines.lst
|  $   nohglines.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  18   f44a21859e57e4abc6155da804d08dd5069e798e 2002-02-10 05:00 A <a@example.com>
|    Copied “hglines.lst” to “hglines2.lst”
|  $   hglines2.lst | 41 0
|  $ 1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o    17   e5648a3eea574f3fc03709b4fdd799a38f649edd 2002-01-01 00:00 C <c@example.gov>
|\     Merge from A
| |  $   clines.lst | 49 0
| |  $ 1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
| |  
o |    16   462a1e95be86f96aaf6d7360f6f770826c3eb641 2002-01-01 00:00 C <c@example.gov>
|\ \     Merge from C:1
| | |  $   .hgtags    |  1 0
| | |  $   blines.lst | 16 0
| | |  $ 2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | |  
| | o    15   be92227e3e43f4e7402408afe110098d209d2568 2002-01-01 00:00 C <c@example.gov>
| | |\     Merge from C:2
| | | |  $   .hgtags     |  1 0
| | | |  $   ablines.lst | 13 0
| | | |  $   blines.lst  | 16 0
| | | |  $   clines.lst  | 49 0
| | | |  $ 4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | | |  
| | o |    14   5e2f73d0c01dfb8ee0d3577e03d016a5f6df58b1 2002-01-01 00:00 C <c@example.gov>
| | |\ \     Merge from B
| | | | |  $   alines.lst | 64 0
| | | | |  $ 1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | |  
| | | | | o  13   14b19ea42f824c8597f8358149c5ba994299a410 2001-02-01 14:56 B <b@example.org>
| | | | |/     Added tag clines for changeset 023aa55bd806
| | | | |    $   .hgtags | 1 0
| | | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| | | | |    
| +-----o  12[clines, oldtag]   023aa55bd8062179ce36adbdd78363e9b88718c1 2001-02-01 14:56 B <b@example.org>
| | | |      Added clines.lst
| | | |    $   clines.lst | 49 0
| | | |    $ 1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| | | |    
| +-----o  11   0e6e0adf281b423193f9dce097ab1df4f91215f7 2001-02-01 05:19 A <a@example.com>
| | | |      Added tag blines for changeset c4110a066208
| | | |    $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| | | |    
| o | |  10[blines]   c4110a066208167dae46b08f4e0d8d2b37e842f3 2001-02-01 05:18 A <a@example.com>
| | | |    Added blines.lst
| | | |  $   blines.lst | 16 0
| | | |  $ 1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
| | | |  
o | | |    9   269399222040415b3928a316f5d28792cc0be4dd 2001-01-01 00:00 C <c@example.gov>
|\ \ \ \     Merge from C
| | | | |  $   ablines.lst |  13 0
| | | | |  $   alines.lst  |  64 0
| | | | |  $   dlines.lst  |  52 0
| | | | |  $ 3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | | | |  
| | o | |  8   250ba7cd831ee91c3ba5bef1faebc38c5dbca5f8 2000-11-02 14:14 B <b@example.org>
| |/ / /     Added tag ablines for changeset c06107b7bcbe
| | | |    $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| | | |    
| o---+  7[ablines]   c06107b7bcbe751d2dd40faf4179ee7d6aac44ac 2000-11-02 14:13 B <b@example.org>
|   | |    Added ablines.lst
|  / /   $   ablines.lst | 13 0
| | |    $ 1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | |    
| | o  6   9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe 2000-11-02 05:44 A <a@example.com>
| |/     Added alines.lst
| |    $   alines.lst | 64 0
| |    $ 1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| |    
| o  5   d760b0fe4fe45adf585f5030181b8081899e26a9 2000-11-01 13:24 B <b@example.org>
|/     Added dlines.lst
|    $   dlines.lst | 52 0
|    $ 1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  4   7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac 2000-05-10 04:23 A <a@example.com>
|    Added «hglines.lst» and «datelines.lst»
|  $   datelines.lst | 41 0
|  $   hglines.lst   | 41 0
|  $ 2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o  3   a16a47a8d7aafc115651bfee6f1202093765365d 2000-02-01 14:00 B <b@example.org>
|    Renamed «crepo.zsh» to «chgrepo.zsh»
|  $   chgrepo.zsh | 94  0
|  $   crepo.zsh   |  0 94
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
|  
o  2   5a6a1bf999fad1f4547eeb887af54f31d11833f2 2000-01-15 15:00 B <b@example.org>
|    Replaced
|        (
|            ...
|        )
|    with
|        {
|            ...
|        }
|  $   crepo.zsh | 4 4
|  $ 1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
|  
o  1   dfe39aa48c6ddde158e42217548b531a45ff66e9 2000-01-05 07:30 A <a@example.com>
|    Renamed «createrepo.zsh» to «crepo.zsh»
|  $   createrepo.zsh |  0 94
|  $   crepo.zsh      | 94  0
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  0   99ea42d70fbe32af955de907352999b1d94bef5f 1999-01-02 05:20 A <a@example.com>
|    Added «createrepo.zsh»
|  $   createrepo.zsh | 94 0
|  $ 1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
{{{1 git
@  commit 504f74154456dbb0e9441326514e42ce66279e62
|  Author: A <a@example.com>
|  Date:   Mon Feb 11 05:43:00 2002
|  
|      Added .hgignore
|      Added directory/file
|  
|  $   .hgignore      | 2 0
|  $   directory/file | 1 0
|  $ 2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
o    commit d8140c0b7b0b670bafe0891bcf0c4582092de884
|\   Author: C <c@example.gov>
| |  Date:   Mon Feb 11 05:00:00 2002
| |  
| |      Merge
| |  
| |  $   elines.lst     |   0 19
| |  $   emerged.lst    | 127  0
| |  $   flines.lst     |   0  5
| |  $   glines.lst     |  73  0
| |  $   glinescopy.lst |  83  0
| |  $ 5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
o |  commit e021c634413b240b8c834a85200acc28d645f1f1
| |  Author: A <a@example.com>
| |  Date:   Mon Feb 11 04:15:00 2002
| |  
| |      Added elines.lst with eplines
| |      Added flines.lst with frlines
| |      Added glines.lst with grlines
| |  
| |  $   elines.lst | 19 0
| |  $   flines.lst |  5 0
| |  $   glines.lst | 10 0
| |  $ 3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| o  commit e1eaeea486e48634588c778fd36a81ac5c8869a6
|/   Author: A <a@example.com>
|    Date:   Mon Feb 11 04:15:00 2002
|    
|        Added elines.lst, flines.lst and glines.lst
|    
|    $   elines.lst |  88 0
|    $   flines.lst |  12 0
|    $   glines.lst |  59 0
|    $ 3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
o  commit 5afd628b0861f6447ed813895d5ced58a1c42a72
|  Author: A <a@example.com>
|  Date:   Mon Feb 11 03:16:00 2002
|  
|      Added tag oldtag for changeset 023aa55bd806
|  
|  $   .hgtags | 1 0
|  $ 1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
o  commit e85aa09aab1621b59b8be37f723410b219c8599c
|  Author: A <a@example.com>
|  Date:   Mon Feb 11 03:15:00 2002
|  
|      Added ignored10.lst
|  
|  $   ignored10.lst | 10 0
|  $ 1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
o  commit 67cf252de26b12da6769114cc89b793357f5a46a
|  Author: B <b@example.org>
|  Date:   Sun Feb 10 16:01:00 2002
|  
|      Added nohglinesrev.lst
|  
|  $   nohglinesrev.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
o  commit 456e0b05b81af4f332405336f11df4769ec9f250
|  Author: B <b@example.org>
|  Date:   Sun Feb 10 15:33:00 2002
|  
|      Added nohglines.lst
|  
|  $   nohglines.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
o  commit f44a21859e57e4abc6155da804d08dd5069e798e
|  Author: A <a@example.com>
|  Date:   Sun Feb 10 05:00:00 2002
|  
|      Copied “hglines.lst” to “hglines2.lst”
|  
|  $   hglines2.lst | 41 0
|  $ 1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
o    commit e5648a3eea574f3fc03709b4fdd799a38f649edd
|\   Author: C <c@example.gov>
| |  Date:   Tue Jan 01 00:00:45 2002
| |  
| |      Merge from A
| |  
| |  $   clines.lst | 49 0
| |  $ 1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
o |    commit 462a1e95be86f96aaf6d7360f6f770826c3eb641
|\ \   Author: C <c@example.gov>
| | |  Date:   Tue Jan 01 00:00:30 2002
| | |  
| | |      Merge from C:1
| | |  
| | |  $   .hgtags    |  1 0
| | |  $   blines.lst | 16 0
| | |  $ 2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | o    commit be92227e3e43f4e7402408afe110098d209d2568
| | |\   Author: C <c@example.gov>
| | | |  Date:   Tue Jan 01 00:00:15 2002
| | | |  
| | | |      Merge from C:2
| | | |  
| | | |  $   .hgtags     |  1 0
| | | |  $   ablines.lst | 13 0
| | | |  $   blines.lst  | 16 0
| | | |  $   clines.lst  | 49 0
| | | |  $ 4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | o |    commit 5e2f73d0c01dfb8ee0d3577e03d016a5f6df58b1
| | |\ \   Author: C <c@example.gov>
| | | | |  Date:   Tue Jan 01 00:00:00 2002
| | | | |  
| | | | |      Merge from B
| | | | |  
| | | | |  $   alines.lst | 64 0
| | | | |  $ 1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | | o  commit 14b19ea42f824c8597f8358149c5ba994299a410
| | | | |/   Author: B <b@example.org>
| | | | |    Date:   Thu Feb 01 14:56:52 2001
| | | | |    
| | | | |        Added tag clines for changeset 023aa55bd806
| | | | |    
| | | | |    $   .hgtags | 1 0
| | | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| +-----o  commit 023aa55bd8062179ce36adbdd78363e9b88718c1
| | | |    Author: B <b@example.org>
| | | |    Date:   Thu Feb 01 14:56:00 2001
| | | |    
| | | |        Added clines.lst
| | | |    
| | | |    $   clines.lst | 49 0
| | | |    $ 1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| +-----o  commit 0e6e0adf281b423193f9dce097ab1df4f91215f7
| | | |    Author: A <a@example.com>
| | | |    Date:   Thu Feb 01 05:19:00 2001
| | | |    
| | | |        Added tag blines for changeset c4110a066208
| | | |    
| | | |    $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| o | |  commit c4110a066208167dae46b08f4e0d8d2b37e842f3
| | | |  Author: A <a@example.com>
| | | |  Date:   Thu Feb 01 05:18:00 2001
| | | |  
| | | |      Added blines.lst
| | | |  
| | | |  $   blines.lst | 16 0
| | | |  $ 1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
o | | |    commit 269399222040415b3928a316f5d28792cc0be4dd
|\ \ \ \   Author: C <c@example.gov>
| | | | |  Date:   Mon Jan 01 00:00:00 2001
| | | | |  
| | | | |      Merge from C
| | | | |  
| | | | |  $   ablines.lst |  13 0
| | | | |  $   alines.lst  |  64 0
| | | | |  $   dlines.lst  |  52 0
| | | | |  $ 3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | o | |  commit 250ba7cd831ee91c3ba5bef1faebc38c5dbca5f8
| |/ / /   Author: B <b@example.org>
| | | |    Date:   Thu Nov 02 14:14:00 2000
| | | |    
| | | |        Added tag ablines for changeset c06107b7bcbe
| | | |    
| | | |    $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| o---+  commit c06107b7bcbe751d2dd40faf4179ee7d6aac44ac
|   | |  Author: B <b@example.org>
|  / /   Date:   Thu Nov 02 14:13:00 2000
| | |    
| | |        Added ablines.lst
| | |    
| | |    $   ablines.lst | 13 0
| | |    $ 1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | o  commit 9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe
| |/   Author: A <a@example.com>
| |    Date:   Thu Nov 02 05:44:00 2000
| |    
| |        Added alines.lst
| |    
| |    $   alines.lst | 64 0
| |    $ 1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| o  commit d760b0fe4fe45adf585f5030181b8081899e26a9
|/   Author: B <b@example.org>
|    Date:   Wed Nov 01 13:24:00 2000
|    
|        Added dlines.lst
|    
|    $   dlines.lst | 52 0
|    $ 1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
o  commit 7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac
|  Author: A <a@example.com>
|  Date:   Wed May 10 04:23:00 2000
|  
|      Added «hglines.lst» and «datelines.lst»
|  
|  $   datelines.lst | 41 0
|  $   hglines.lst   | 41 0
|  $ 2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
o  commit a16a47a8d7aafc115651bfee6f1202093765365d
|  Author: B <b@example.org>
|  Date:   Tue Feb 01 14:00:00 2000
|  
|      Renamed «crepo.zsh» to «chgrepo.zsh»
|  
|  $   chgrepo.zsh | 94  0
|  $   crepo.zsh   |  0 94
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
o  commit 5a6a1bf999fad1f4547eeb887af54f31d11833f2
|  Author: B <b@example.org>
|  Date:   Sat Jan 15 15:00:00 2000
|  
|      Replaced
|          (
|              ...
|          )
|      with
|          {
|              ...
|          }
|  
|  $   crepo.zsh | 4 4
|  $ 1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
o  commit dfe39aa48c6ddde158e42217548b531a45ff66e9
|  Author: A <a@example.com>
|  Date:   Wed Jan 05 07:30:00 2000
|  
|      Renamed «createrepo.zsh» to «crepo.zsh»
|  
|  $   createrepo.zsh |  0 94
|  $   crepo.zsh      | 94  0
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
o  commit 99ea42d70fbe32af955de907352999b1d94bef5f
|  Author: A <a@example.com>
|  Date:   Sat Jan 02 05:20:00 1999
|  
|      Added «createrepo.zsh»
|  
|  $   createrepo.zsh | 94 0
|  $ 1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
{{{1 gitoneline
@  504f74154456dbb0e9441326514e42ce66279e62 Added .hgignore
|  $   .hgignore      | 2 0
|  $   directory/file | 1 0
|  $ 2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
o    d8140c0b7b0b670bafe0891bcf0c4582092de884 Merge
|\   $   elines.lst     |   0 19
| |  $   emerged.lst    | 127  0
| |  $   flines.lst     |   0  5
| |  $   glines.lst     |  73  0
| |  $   glinescopy.lst |  83  0
| |  $ 5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
o |  e021c634413b240b8c834a85200acc28d645f1f1 Added elines.lst with eplines
| |  $   elines.lst | 19 0
| |  $   flines.lst |  5 0
| |  $   glines.lst | 10 0
| |  $ 3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| o  e1eaeea486e48634588c778fd36a81ac5c8869a6 Added elines.lst, flines.lst and glines.lst
|/   $   elines.lst |  88 0
|    $   flines.lst |  12 0
|    $   glines.lst |  59 0
|    $ 3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
o  5afd628b0861f6447ed813895d5ced58a1c42a72 Added tag oldtag for changeset 023aa55bd806
|  $   .hgtags | 1 0
|  $ 1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
o  e85aa09aab1621b59b8be37f723410b219c8599c Added ignored10.lst
|  $   ignored10.lst | 10 0
|  $ 1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
o  67cf252de26b12da6769114cc89b793357f5a46a Added nohglinesrev.lst
|  $   nohglinesrev.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
o  456e0b05b81af4f332405336f11df4769ec9f250 Added nohglines.lst
|  $   nohglines.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
o  f44a21859e57e4abc6155da804d08dd5069e798e Copied “hglines.lst” to “hglines2.lst”
|  $   hglines2.lst | 41 0
|  $ 1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
o    e5648a3eea574f3fc03709b4fdd799a38f649edd Merge from A
|\   $   clines.lst | 49 0
| |  $ 1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
o |    462a1e95be86f96aaf6d7360f6f770826c3eb641 Merge from C:1
|\ \   $   .hgtags    |  1 0
| | |  $   blines.lst | 16 0
| | |  $ 2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | o    be92227e3e43f4e7402408afe110098d209d2568 Merge from C:2
| | |\   $   .hgtags     |  1 0
| | | |  $   ablines.lst | 13 0
| | | |  $   blines.lst  | 16 0
| | | |  $   clines.lst  | 49 0
| | | |  $ 4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | o |    5e2f73d0c01dfb8ee0d3577e03d016a5f6df58b1 Merge from B
| | |\ \   $   alines.lst | 64 0
| | | | |  $ 1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | | o  14b19ea42f824c8597f8358149c5ba994299a410 Added tag clines for changeset 023aa55bd806
| | | | |/   $   .hgtags | 1 0
| | | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| +-----o  023aa55bd8062179ce36adbdd78363e9b88718c1 Added clines.lst
| | | |    $   clines.lst | 49 0
| | | |    $ 1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| +-----o  0e6e0adf281b423193f9dce097ab1df4f91215f7 Added tag blines for changeset c4110a066208
| | | |    $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| o | |  c4110a066208167dae46b08f4e0d8d2b37e842f3 Added blines.lst
| | | |  $   blines.lst | 16 0
| | | |  $ 1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
o | | |    269399222040415b3928a316f5d28792cc0be4dd Merge from C
|\ \ \ \   $   ablines.lst |  13 0
| | | | |  $   alines.lst  |  64 0
| | | | |  $   dlines.lst  |  52 0
| | | | |  $ 3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | o | |  250ba7cd831ee91c3ba5bef1faebc38c5dbca5f8 Added tag ablines for changeset c06107b7bcbe
| |/ / /   $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| o---+  c06107b7bcbe751d2dd40faf4179ee7d6aac44ac Added ablines.lst
|   | |  $   ablines.lst | 13 0
|  / /   $ 1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | o  9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe Added alines.lst
| |/   $   alines.lst | 64 0
| |    $ 1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| o  d760b0fe4fe45adf585f5030181b8081899e26a9 Added dlines.lst
|/   $   dlines.lst | 52 0
|    $ 1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
o  7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac Added «hglines.lst» and «datelines.lst»
|  $   datelines.lst | 41 0
|  $   hglines.lst   | 41 0
|  $ 2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
o  a16a47a8d7aafc115651bfee6f1202093765365d Renamed «crepo.zsh» to «chgrepo.zsh»
|  $   chgrepo.zsh | 94  0
|  $   crepo.zsh   |  0 94
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
o  5a6a1bf999fad1f4547eeb887af54f31d11833f2 Replaced
|  $   crepo.zsh | 4 4
|  $ 1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
o  dfe39aa48c6ddde158e42217548b531a45ff66e9 Renamed «createrepo.zsh» to «crepo.zsh»
|  $   createrepo.zsh |  0 94
|  $   crepo.zsh      | 94  0
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
o  99ea42d70fbe32af955de907352999b1d94bef5f Added «createrepo.zsh»
|  $   createrepo.zsh | 94 0
|  $ 1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
{{{1 svn
@  r26 | A <a@example.com> | 2002-02-11 05:43:00 (Mon, 11 Feb 2002) | 3 lines
|  
|  Added .hgignore
|  Added directory/file
|  
|  $   .hgignore      | 2 0
|  $   directory/file | 1 0
|  $ 2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
o    r25 | C <c@example.gov> | 2002-02-11 05:00:00 (Mon, 11 Feb 2002) | 2 lines
|\   
| |  Merge
| |  
| |  $   elines.lst     |   0 19
| |  $   emerged.lst    | 127  0
| |  $   flines.lst     |   0  5
| |  $   glines.lst     |  73  0
| |  $   glinescopy.lst |  83  0
| |  $ 5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
o |  r24 | A <a@example.com> | 2002-02-11 04:15:00 (Mon, 11 Feb 2002) | 4 lines
| |  
| |  Added elines.lst with eplines
| |  Added flines.lst with frlines
| |  Added glines.lst with grlines
| |  
| |  $   elines.lst | 19 0
| |  $   flines.lst |  5 0
| |  $   glines.lst | 10 0
| |  $ 3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| o  r23 | A <a@example.com> | 2002-02-11 04:15:00 (Mon, 11 Feb 2002) | 2 lines
|/   
|    Added elines.lst, flines.lst and glines.lst
|    
|    $   elines.lst |  88 0
|    $   flines.lst |  12 0
|    $   glines.lst |  59 0
|    $ 3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
o  r22 | A <a@example.com> | 2002-02-11 03:16:00 (Mon, 11 Feb 2002) | 2 lines
|  
|  Added tag oldtag for changeset 023aa55bd806
|  
|  $   .hgtags | 1 0
|  $ 1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
o  r21 | A <a@example.com> | 2002-02-11 03:15:00 (Mon, 11 Feb 2002) | 2 lines
|  
|  Added ignored10.lst
|  
|  $   ignored10.lst | 10 0
|  $ 1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
o  r20 | B <b@example.org> | 2002-02-10 16:01:00 (Sun, 10 Feb 2002) | 2 lines
|  
|  Added nohglinesrev.lst
|  
|  $   nohglinesrev.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
o  r19 | B <b@example.org> | 2002-02-10 15:33:00 (Sun, 10 Feb 2002) | 2 lines
|  
|  Added nohglines.lst
|  
|  $   nohglines.lst | 53 0
|  $ 1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
o  r18 | A <a@example.com> | 2002-02-10 05:00:00 (Sun, 10 Feb 2002) | 2 lines
|  
|  Copied “hglines.lst” to “hglines2.lst”
|  
|  $   hglines2.lst | 41 0
|  $ 1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
o    r17 | C <c@example.gov> | 2002-01-01 00:00:45 (Tue, 01 Jan 2002) | 2 lines
|\   
| |  Merge from A
| |  
| |  $   clines.lst | 49 0
| |  $ 1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
o |    r16 | C <c@example.gov> | 2002-01-01 00:00:30 (Tue, 01 Jan 2002) | 2 lines
|\ \   
| | |  Merge from C:1
| | |  
| | |  $   .hgtags    |  1 0
| | |  $   blines.lst | 16 0
| | |  $ 2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | o    r15 | C <c@example.gov> | 2002-01-01 00:00:15 (Tue, 01 Jan 2002) | 2 lines
| | |\   
| | | |  Merge from C:2
| | | |  
| | | |  $   .hgtags     |  1 0
| | | |  $   ablines.lst | 13 0
| | | |  $   blines.lst  | 16 0
| | | |  $   clines.lst  | 49 0
| | | |  $ 4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | o |    r14 | C <c@example.gov> | 2002-01-01 00:00:00 (Tue, 01 Jan 2002) | 2 lines
| | |\ \   
| | | | |  Merge from B
| | | | |  
| | | | |  $   alines.lst | 64 0
| | | | |  $ 1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | | o  r13 | B <b@example.org> | 2001-02-01 14:56:52 (Thu, 01 Feb 2001) | 2 lines
| | | | |/   
| | | | |    Added tag clines for changeset 023aa55bd806
| | | | |    
| | | | |    $   .hgtags | 1 0
| | | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| +-----o  r12 | B <b@example.org> | 2001-02-01 14:56:00 (Thu, 01 Feb 2001) | 2 lines
| | | |    
| | | |    Added clines.lst
| | | |    
| | | |    $   clines.lst | 49 0
| | | |    $ 1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| +-----o  r11 | A <a@example.com> | 2001-02-01 05:19:00 (Thu, 01 Feb 2001) | 2 lines
| | | |    
| | | |    Added tag blines for changeset c4110a066208
| | | |    
| | | |    $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| o | |  r10 | A <a@example.com> | 2001-02-01 05:18:00 (Thu, 01 Feb 2001) | 2 lines
| | | |  
| | | |  Added blines.lst
| | | |  
| | | |  $   blines.lst | 16 0
| | | |  $ 1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
o | | |    r9 | C <c@example.gov> | 2001-01-01 00:00:00 (Mon, 01 Jan 2001) | 2 lines
|\ \ \ \   
| | | | |  Merge from C
| | | | |  
| | | | |  $   ablines.lst |  13 0
| | | | |  $   alines.lst  |  64 0
| | | | |  $   dlines.lst  |  52 0
| | | | |  $ 3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | o | |  r8 | B <b@example.org> | 2000-11-02 14:14:00 (Thu, 02 Nov 2000) | 2 lines
| |/ / /   
| | | |    Added tag ablines for changeset c06107b7bcbe
| | | |    
| | | |    $   .hgtags | 1 0
| | | |    $ 1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| o---+  r7 | B <b@example.org> | 2000-11-02 14:13:00 (Thu, 02 Nov 2000) | 2 lines
|   | |  
|  / /   Added ablines.lst
| | |    
| | |    $   ablines.lst | 13 0
| | |    $ 1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | o  r6 | A <a@example.com> | 2000-11-02 05:44:00 (Thu, 02 Nov 2000) | 2 lines
| |/   
| |    Added alines.lst
| |    
| |    $   alines.lst | 64 0
| |    $ 1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| o  r5 | B <b@example.org> | 2000-11-01 13:24:00 (Wed, 01 Nov 2000) | 2 lines
|/   
|    Added dlines.lst
|    
|    $   dlines.lst | 52 0
|    $ 1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
o  r4 | A <a@example.com> | 2000-05-10 04:23:00 (Wed, 10 May 2000) | 2 lines
|  
|  Added «hglines.lst» and «datelines.lst»
|  
|  $   datelines.lst | 41 0
|  $   hglines.lst   | 41 0
|  $ 2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
o  r3 | B <b@example.org> | 2000-02-01 14:00:00 (Tue, 01 Feb 2000) | 2 lines
|  
|  Renamed «crepo.zsh» to «chgrepo.zsh»
|  
|  $   chgrepo.zsh | 94  0
|  $   crepo.zsh   |  0 94
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
o  r2 | B <b@example.org> | 2000-01-15 15:00:00 (Sat, 15 Jan 2000) | 9 lines
|  
|  Replaced
|      (
|          ...
|      )
|  with
|      {
|          ...
|      }
|  
|  $   crepo.zsh | 4 4
|  $ 1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
o  r1 | A <a@example.com> | 2000-01-05 07:30:00 (Wed, 05 Jan 2000) | 2 lines
|  
|  Renamed «createrepo.zsh» to «crepo.zsh»
|  
|  $   createrepo.zsh |  0 94
|  $   crepo.zsh      | 94  0
|  $ 2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
o  r0 | A <a@example.com> | 1999-01-02 05:20:00 (Sat, 02 Jan 1999) | 2 lines
|  
|  Added «createrepo.zsh»
|  
|  $   createrepo.zsh | 94 0
|  $ 1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
{{{1 bzr
@  revno: 26
|  tags: tip
|  revision-id: 504f74154456dbb0e9441326514e42ce66279e62
|  parent: d8140c0b7b0b670bafe0891bcf0c4582092de884
|  author: A <a@example.com>
|  timestamp: Mon 2002-02-11 05:43:00
|  message:
|  @ Added .hgignore
|  @ Added directory/file
|  $  .hgignore      | 2 0
|  $  directory/file | 1 0
|  $2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
|  
o    revno: 25
|\   revision-id: d8140c0b7b0b670bafe0891bcf0c4582092de884
| |  parent: e021c634413b240b8c834a85200acc28d645f1f1
| |  parent: e1eaeea486e48634588c778fd36a81ac5c8869a6
| |  author: C <c@example.gov>
| |  timestamp: Mon 2002-02-11 05:00:00
| |  message:
| |  @ Merge
| |  $  elines.lst     |   0 19
| |  $  emerged.lst    | 127  0
| |  $  flines.lst     |   0  5
| |  $  glines.lst     |  73  0
| |  $  glinescopy.lst |  83  0
| |  $5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
| |  
o |  revno: 24
| |  revision-id: e021c634413b240b8c834a85200acc28d645f1f1
| |  parent: 5afd628b0861f6447ed813895d5ced58a1c42a72
| |  author: A <a@example.com>
| |  timestamp: Mon 2002-02-11 04:15:00
| |  message:
| |  @ Added elines.lst with eplines
| |  @ Added flines.lst with frlines
| |  @ Added glines.lst with grlines
| |  $  elines.lst | 19 0
| |  $  flines.lst |  5 0
| |  $  glines.lst | 10 0
| |  $3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| |  
| o  revno: 23
|/   revision-id: e1eaeea486e48634588c778fd36a81ac5c8869a6
|    parent: 5afd628b0861f6447ed813895d5ced58a1c42a72
|    author: A <a@example.com>
|    timestamp: Mon 2002-02-11 04:15:00
|    message:
|    @ Added elines.lst, flines.lst and glines.lst
|    $  elines.lst |  88 0
|    $  flines.lst |  12 0
|    $  glines.lst |  59 0
|    $3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  revno: 22
|  revision-id: 5afd628b0861f6447ed813895d5ced58a1c42a72
|  parent: e85aa09aab1621b59b8be37f723410b219c8599c
|  author: A <a@example.com>
|  timestamp: Mon 2002-02-11 03:16:00
|  message:
|  @ Added tag oldtag for changeset 023aa55bd806
|  $  .hgtags | 1 0
|  $1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
|  
o  revno: 21
|  revision-id: e85aa09aab1621b59b8be37f723410b219c8599c
|  parent: 67cf252de26b12da6769114cc89b793357f5a46a
|  author: A <a@example.com>
|  timestamp: Mon 2002-02-11 03:15:00
|  message:
|  @ Added ignored10.lst
|  $  ignored10.lst | 10 0
|  $1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
|  
o  revno: 20
|  revision-id: 67cf252de26b12da6769114cc89b793357f5a46a
|  parent: 456e0b05b81af4f332405336f11df4769ec9f250
|  author: B <b@example.org>
|  timestamp: Sun 2002-02-10 16:01:00
|  message:
|  @ Added nohglinesrev.lst
|  $  nohglinesrev.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
|  
o  revno: 19
|  revision-id: 456e0b05b81af4f332405336f11df4769ec9f250
|  parent: f44a21859e57e4abc6155da804d08dd5069e798e
|  author: B <b@example.org>
|  timestamp: Sun 2002-02-10 15:33:00
|  message:
|  @ Added nohglines.lst
|  $  nohglines.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  revno: 18
|  revision-id: f44a21859e57e4abc6155da804d08dd5069e798e
|  parent: e5648a3eea574f3fc03709b4fdd799a38f649edd
|  author: A <a@example.com>
|  timestamp: Sun 2002-02-10 05:00:00
|  message:
|  @ Copied “hglines.lst” to “hglines2.lst”
|  $  hglines2.lst | 41 0
|  $1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o    revno: 17
|\   revision-id: e5648a3eea574f3fc03709b4fdd799a38f649edd
| |  parent: 462a1e95be86f96aaf6d7360f6f770826c3eb641
| |  parent: be92227e3e43f4e7402408afe110098d209d2568
| |  author: C <c@example.gov>
| |  timestamp: Tue 2002-01-01 00:00:45
| |  message:
| |  @ Merge from A
| |  $  clines.lst | 49 0
| |  $1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
| |  
o |    revno: 16
|\ \   revision-id: 462a1e95be86f96aaf6d7360f6f770826c3eb641
| | |  parent: 269399222040415b3928a316f5d28792cc0be4dd
| | |  parent: c4110a066208167dae46b08f4e0d8d2b37e842f3
| | |  author: C <c@example.gov>
| | |  timestamp: Tue 2002-01-01 00:00:30
| | |  message:
| | |  @ Merge from C:1
| | |  $  .hgtags    |  1 0
| | |  $  blines.lst | 16 0
| | |  $2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | |  
| | o    revno: 15
| | |\   revision-id: be92227e3e43f4e7402408afe110098d209d2568
| | | |  parent: 5e2f73d0c01dfb8ee0d3577e03d016a5f6df58b1
| | | |  parent: 023aa55bd8062179ce36adbdd78363e9b88718c1
| | | |  author: C <c@example.gov>
| | | |  branch nick: A
| | | |  timestamp: Tue 2002-01-01 00:00:15
| | | |  message:
| | | |  @ Merge from C:2
| | | |  $  .hgtags     |  1 0
| | | |  $  ablines.lst | 13 0
| | | |  $  blines.lst  | 16 0
| | | |  $  clines.lst  | 49 0
| | | |  $4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | | |  
| | o |    revno: 14
| | |\ \   revision-id: 5e2f73d0c01dfb8ee0d3577e03d016a5f6df58b1
| | | | |  parent: d760b0fe4fe45adf585f5030181b8081899e26a9
| | | | |  parent: 9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe
| | | | |  author: C <c@example.gov>
| | | | |  branch nick: A
| | | | |  timestamp: Tue 2002-01-01 00:00:00
| | | | |  message:
| | | | |  @ Merge from B
| | | | |  $  alines.lst | 64 0
| | | | |  $1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | |  
| | | | | o  revno: 13
| | | | |/   revision-id: 14b19ea42f824c8597f8358149c5ba994299a410
| | | | |    parent: 023aa55bd8062179ce36adbdd78363e9b88718c1
| | | | |    author: B <b@example.org>
| | | | |    branch nick: C
| | | | |    timestamp: Thu 2001-02-01 14:56:52
| | | | |    message:
| | | | |    @ Added tag clines for changeset 023aa55bd806
| | | | |    $  .hgtags | 1 0
| | | | |    $1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| | | | |    
| +-----o  revno: 12
| | | |    tags: clines, oldtag
| | | |    revision-id: 023aa55bd8062179ce36adbdd78363e9b88718c1
| | | |    parent: c4110a066208167dae46b08f4e0d8d2b37e842f3
| | | |    author: B <b@example.org>
| | | |    branch nick: C
| | | |    timestamp: Thu 2001-02-01 14:56:00
| | | |    message:
| | | |    @ Added clines.lst
| | | |    $  clines.lst | 49 0
| | | |    $1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| | | |    
| +-----o  revno: 11
| | | |    revision-id: 0e6e0adf281b423193f9dce097ab1df4f91215f7
| | | |    parent: c4110a066208167dae46b08f4e0d8d2b37e842f3
| | | |    author: A <a@example.com>
| | | |    branch nick: C
| | | |    timestamp: Thu 2001-02-01 05:19:00
| | | |    message:
| | | |    @ Added tag blines for changeset c4110a066208
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| | | |    
| o | |  revno: 10
| | | |  tags: blines
| | | |  revision-id: c4110a066208167dae46b08f4e0d8d2b37e842f3
| | | |  parent: 250ba7cd831ee91c3ba5bef1faebc38c5dbca5f8
| | | |  author: A <a@example.com>
| | | |  branch nick: C
| | | |  timestamp: Thu 2001-02-01 05:18:00
| | | |  message:
| | | |  @ Added blines.lst
| | | |  $  blines.lst | 16 0
| | | |  $1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
| | | |  
o | | |    revno: 9
|\ \ \ \   revision-id: 269399222040415b3928a316f5d28792cc0be4dd
| | | | |  parent: 7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac
| | | | |  parent: c06107b7bcbe751d2dd40faf4179ee7d6aac44ac
| | | | |  author: C <c@example.gov>
| | | | |  timestamp: Mon 2001-01-01 00:00:00
| | | | |  message:
| | | | |  @ Merge from C
| | | | |  $  ablines.lst |  13 0
| | | | |  $  alines.lst  |  64 0
| | | | |  $  dlines.lst  |  52 0
| | | | |  $3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | | | |  
| | o | |  revno: 8
| |/ / /   revision-id: 250ba7cd831ee91c3ba5bef1faebc38c5dbca5f8
| | | |    parent: c06107b7bcbe751d2dd40faf4179ee7d6aac44ac
| | | |    author: B <b@example.org>
| | | |    branch nick: C
| | | |    timestamp: Thu 2000-11-02 14:14:00
| | | |    message:
| | | |    @ Added tag ablines for changeset c06107b7bcbe
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| | | |    
| o---+  revno: 7
|   | |  tags: ablines
|  / /   revision-id: c06107b7bcbe751d2dd40faf4179ee7d6aac44ac
| | |    parent: 9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe
| | |    author: B <b@example.org>
| | |    branch nick: C
| | |    timestamp: Thu 2000-11-02 14:13:00
| | |    message:
| | |    @ Added ablines.lst
| | |    $  ablines.lst | 13 0
| | |    $1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | |    
| | o  revno: 6
| |/   revision-id: 9fe0c28c3e1dd175e8372b742f13cbb7bd6799fe
| |    parent: d760b0fe4fe45adf585f5030181b8081899e26a9
| |    author: A <a@example.com>
| |    branch nick: B
| |    timestamp: Thu 2000-11-02 05:44:00
| |    message:
| |    @ Added alines.lst
| |    $  alines.lst | 64 0
| |    $1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| |    
| o  revno: 5
|/   revision-id: d760b0fe4fe45adf585f5030181b8081899e26a9
|    parent: 7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac
|    author: B <b@example.org>
|    branch nick: A
|    timestamp: Wed 2000-11-01 13:24:00
|    message:
|    @ Added dlines.lst
|    $  dlines.lst | 52 0
|    $1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  revno: 4
|  revision-id: 7e16e7cbaf9ec5b0e65832bc6f057ba825c38cac
|  parent: a16a47a8d7aafc115651bfee6f1202093765365d
|  author: A <a@example.com>
|  timestamp: Wed 2000-05-10 04:23:00
|  message:
|  @ Added «hglines.lst» and «datelines.lst»
|  $  datelines.lst | 41 0
|  $  hglines.lst   | 41 0
|  $2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o  revno: 3
|  revision-id: a16a47a8d7aafc115651bfee6f1202093765365d
|  parent: 5a6a1bf999fad1f4547eeb887af54f31d11833f2
|  author: B <b@example.org>
|  timestamp: Tue 2000-02-01 14:00:00
|  message:
|  @ Renamed «crepo.zsh» to «chgrepo.zsh»
|  $  chgrepo.zsh | 94  0
|  $  crepo.zsh   |  0 94
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
|  
o  revno: 2
|  revision-id: 5a6a1bf999fad1f4547eeb887af54f31d11833f2
|  parent: dfe39aa48c6ddde158e42217548b531a45ff66e9
|  author: B <b@example.org>
|  timestamp: Sat 2000-01-15 15:00:00
|  message:
|  @ Replaced
|  @     (
|  @         ...
|  @     )
|  @ with
|  @     {
|  @         ...
|  @     }
|  $  crepo.zsh | 4 4
|  $1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
|  
o  revno: 1
|  revision-id: dfe39aa48c6ddde158e42217548b531a45ff66e9
|  parent: 99ea42d70fbe32af955de907352999b1d94bef5f
|  author: A <a@example.com>
|  timestamp: Wed 2000-01-05 07:30:00
|  message:
|  @ Renamed «createrepo.zsh» to «crepo.zsh»
|  $  createrepo.zsh |  0 94
|  $  crepo.zsh      | 94  0
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  revno: 0
|  revision-id: 99ea42d70fbe32af955de907352999b1d94bef5f
|  parent: 0000000000000000000000000000000000000000
|  author: A <a@example.com>
|  timestamp: Sat 1999-01-02 05:20:00
|  message:
|  @ Added «createrepo.zsh»
|  $  createrepo.zsh | 94 0
|  $1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
{{{1 bzrshort
@  26 A 2002-02-11 {tip}
|  @ Added .hgignore
|  @ Added directory/file
|  $  .hgignore      | 2 0
|  $  directory/file | 1 0
|  $2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
|  
o    25 C 2002-02-11 [merge]
|\   @ Merge
| |  $  elines.lst     |   0 19
| |  $  emerged.lst    | 127  0
| |  $  flines.lst     |   0  5
| |  $  glines.lst     |  73  0
| |  $  glinescopy.lst |  83  0
| |  $5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
| |  
o |  24 A 2002-02-11
| |  @ Added elines.lst with eplines
| |  @ Added flines.lst with frlines
| |  @ Added glines.lst with grlines
| |  $  elines.lst | 19 0
| |  $  flines.lst |  5 0
| |  $  glines.lst | 10 0
| |  $3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| |  
| o  23 A 2002-02-11
|/   @ Added elines.lst, flines.lst and glines.lst
|    $  elines.lst |  88 0
|    $  flines.lst |  12 0
|    $  glines.lst |  59 0
|    $3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  22 A 2002-02-11
|  @ Added tag oldtag for changeset 023aa55bd806
|  $  .hgtags | 1 0
|  $1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
|  
o  21 A 2002-02-11
|  @ Added ignored10.lst
|  $  ignored10.lst | 10 0
|  $1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
|  
o  20 B 2002-02-10
|  @ Added nohglinesrev.lst
|  $  nohglinesrev.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
|  
o  19 B 2002-02-10
|  @ Added nohglines.lst
|  $  nohglines.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  18 A 2002-02-10
|  @ Copied “hglines.lst” to “hglines2.lst”
|  $  hglines2.lst | 41 0
|  $1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o    17 C 2002-01-01 [merge]
|\   @ Merge from A
| |  $  clines.lst | 49 0
| |  $1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
| |  
o |    16 C 2002-01-01 [merge]
|\ \   @ Merge from C:1
| | |  $  .hgtags    |  1 0
| | |  $  blines.lst | 16 0
| | |  $2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | |  
| | o    15 C 2002-01-01 [merge]
| | |\   @ Merge from C:2
| | | |  $  .hgtags     |  1 0
| | | |  $  ablines.lst | 13 0
| | | |  $  blines.lst  | 16 0
| | | |  $  clines.lst  | 49 0
| | | |  $4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | | |  
| | o |    14 C 2002-01-01 [merge]
| | |\ \   @ Merge from B
| | | | |  $  alines.lst | 64 0
| | | | |  $1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | |  
| | | | | o  13 B 2001-02-01
| | | | |/   @ Added tag clines for changeset 023aa55bd806
| | | | |    $  .hgtags | 1 0
| | | | |    $1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| | | | |    
| +-----o  12 B 2001-02-01 {clines, oldtag}
| | | |    @ Added clines.lst
| | | |    $  clines.lst | 49 0
| | | |    $1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| | | |    
| +-----o  11 A 2001-02-01
| | | |    @ Added tag blines for changeset c4110a066208
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| | | |    
| o | |  10 A 2001-02-01 {blines}
| | | |  @ Added blines.lst
| | | |  $  blines.lst | 16 0
| | | |  $1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
| | | |  
o | | |    9 C 2001-01-01 [merge]
|\ \ \ \   @ Merge from C
| | | | |  $  ablines.lst |  13 0
| | | | |  $  alines.lst  |  64 0
| | | | |  $  dlines.lst  |  52 0
| | | | |  $3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | | | |  
| | o | |  8 B 2000-11-02
| |/ / /   @ Added tag ablines for changeset c06107b7bcbe
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| | | |    
| o---+  7 B 2000-11-02 {ablines}
|   | |  @ Added ablines.lst
|  / /   $  ablines.lst | 13 0
| | |    $1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | |    
| | o  6 A 2000-11-02
| |/   @ Added alines.lst
| |    $  alines.lst | 64 0
| |    $1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| |    
| o  5 B 2000-11-01
|/   @ Added dlines.lst
|    $  dlines.lst | 52 0
|    $1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
|    
o  4 A 2000-05-10
|  @ Added «hglines.lst» and «datelines.lst»
|  $  datelines.lst | 41 0
|  $  hglines.lst   | 41 0
|  $2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
|  
o  3 B 2000-02-01
|  @ Renamed «crepo.zsh» to «chgrepo.zsh»
|  $  chgrepo.zsh | 94  0
|  $  crepo.zsh   |  0 94
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
|  
o  2 B 2000-01-15
|  @ Replaced
|  @     (
|  @         ...
|  @     )
|  @ with
|  @     {
|  @         ...
|  @     }
|  $  crepo.zsh | 4 4
|  $1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
|  
o  1 A 2000-01-05
|  @ Renamed «createrepo.zsh» to «crepo.zsh»
|  $  createrepo.zsh |  0 94
|  $  crepo.zsh      | 94  0
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
o  0 A 1999-01-02
|  @ Added «createrepo.zsh»
|  $  createrepo.zsh | 94 0
|  $1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
|  
{{{1 bzrline
@  26: A 2002-02-11 {tip} Added .hgignore
|  $  .hgignore      | 2 0
|  $  directory/file | 1 0
|  $2 files changed, 3 insertions, 0 deletions
|  :diff -r d8140c0b7b0b -r 504f74154456 .hgignore
|  :--- /dev/null
|  :+++ b/.hgignore
|  :@@ -0,0 +1,2 @@
|  :+syntax: glob
|  :+ignored*
|  :diff -r d8140c0b7b0b -r 504f74154456 directory/file
|  :--- /dev/null
|  :+++ b/directory/file
|  :@@ -0,0 +1,1 @@
|  :+File contents
|  :
o    25: C 2002-02-11 [merge] Merge
|\   $  elines.lst     |   0 19
| |  $  emerged.lst    | 127  0
| |  $  flines.lst     |   0  5
| |  $  glines.lst     |  73  0
| |  $  glinescopy.lst |  83  0
| |  $5 files changed, 283 insertions, 24 deletions
| |  :diff -r e021c634413b -r d8140c0b7b0b elines.lst
| |  :--- a/elines.lst
| |  :+++ /dev/null
| |  :@@ -1,19 +0,0 @@
| |  :-    hg init testrepo
| |  :-    cd testrepo
| |  :-    cp ../createrepo.zsh .
| |  :-    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :-    hg mv createrepo.zsh crepo.zsh
| |  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :-    hg mv crepo.zsh chgrepo.zsh
| |  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :-    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :-    cat alines.lst | grep 'b' > ablines.lst
| |  :-    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :-tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b emerged.lst
| |  :--- /dev/null
| |  :+++ b/emerged.lst
| |  :@@ -0,0 +1,127 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+emulate -L zsh
| |  :+set -e
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    set -e
| |  :+>>>>>>> other
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+<<<<<<< local
| |  :+=======
| |  :+    # XXX Date test will work only till 2099
| |  :+>>>>>>> other
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '1999-01-02 5:20' --user $A
| |  :+>>>>>>> other
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-05 7:30' --user $A
| |  :+>>>>>>> other
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-01-15 15:00' --user $B
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+<<<<<<< local
| |  :+=======
| |  :+        --date '2000-02-01 14:00' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+        --date '2000-05-10 4:23' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+        --date '2000-11-01 13:24' --user $B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+        --date '2000-11-02 5:44' --user $A
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+        --date '2000-11-02 14:13' --user $B
| |  :+    hg tag ablines \
| |  :+        --date '2000-11-02 14:14' --user $B
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+        --date '2001-01-01 00:00' --user $C
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+        --date '2001-02-01 05:18' --user $A
| |  :+    hg tag blines \
| |  :+        --date '2001-02-01 05:19' --user $A
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+        --date '2001-02-01 14:56' --user $B
| |  :+    hg tag clines \
| |  :+        --date '2001-02-01 14:56:52' --user $B
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+        --date '2002-01-01 00:00' --user $C
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+        --date '2002-01-01 00:00:15' --user $C
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+        --date '2002-01-01 00:00:30' --user $C
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+        --date '2002-01-01 00:00:45' --user $C
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+        --date '2002-02-10 05:00' --user $A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+        --date '2002-02-10 15:33' --user $B
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+        --date '2002-02-10 16:01' --user $B
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+        --date '2002-02-11 03:15' --user $A
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+        --date '2002-02-11 05:43' --user $A
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r e021c634413b -r d8140c0b7b0b flines.lst
| |  :--- a/flines.lst
| |  :+++ /dev/null
| |  :@@ -1,5 +0,0 @@
| |  :-    hg commit -m 'Merge from C' \
| |  :-    hg commit -m 'Merge from B' \
| |  :-    hg commit -m 'Merge from C:2' \
| |  :-    hg commit -m 'Merge from C:1' \
| |  :-    hg commit -m 'Merge from A' \
| |  :diff -r e021c634413b -r d8140c0b7b0b glines.lst
| |  :--- a/glines.lst
| |  :+++ b/glines.lst
| |  :@@ -1,10 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :     hg mv crepo.zsh chgrepo.zsh
| |  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :     cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :     cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :diff -r e021c634413b -r d8140c0b7b0b glinescopy.lst
| |  :--- /dev/null
| |  :+++ b/glinescopy.lst
| |  :@@ -0,0 +1,83 @@
| |  :+<<<<<<< local
| |  :+=======
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    hg init testrepo
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+>>>>>>> other
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg branch A
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg branch B
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg branch C
| |  :+>>>>>>> other
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg tag ablines \
| |  :+    hg update default
| |  :+    hg merge -r ablines
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg update C
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg tag blines \
| |  :+    hg update -r -2
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg tag clines \
| |  :+    hg update A
| |  :+    hg merge -r B
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg merge -r clines
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg update default
| |  :+    hg merge -r blines
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg merge -r A
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+>>>>>>> other
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+<<<<<<< local
| |  :+=======
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    hg rm hglines2.lst
| |  :+    rm nohglines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    echo 'Abc' > ignoredabc
| |  :+>>>>>>> other
| |  :
o |  24: A 2002-02-11 Added elines.lst with eplines
| |  $  elines.lst | 19 0
| |  $  flines.lst |  5 0
| |  $  glines.lst | 10 0
| |  $3 files changed, 34 insertions, 0 deletions
| |  :diff -r 5afd628b0861 -r e021c634413b elines.lst
| |  :--- /dev/null
| |  :+++ b/elines.lst
| |  :@@ -0,0 +1,19 @@
| |  :+    hg init testrepo
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :diff -r 5afd628b0861 -r e021c634413b flines.lst
| |  :--- /dev/null
| |  :+++ b/flines.lst
| |  :@@ -0,0 +1,5 @@
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from A' \
| |  :diff -r 5afd628b0861 -r e021c634413b glines.lst
| |  :--- /dev/null
| |  :+++ b/glines.lst
| |  :@@ -0,0 +1,10 @@
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :
| o  23: A 2002-02-11 Added elines.lst, flines.lst and glines.lst
|/   $  elines.lst |  88 0
|    $  flines.lst |  12 0
|    $  glines.lst |  59 0
|    $3 files changed, 159 insertions, 0 deletions
|    :diff -r 5afd628b0861 -r e1eaeea486e4 elines.lst
|    :--- /dev/null
|    :+++ b/elines.lst
|    :@@ -0,0 +1,88 @@
|    :+emulate -L zsh
|    :+set -e
|    :+local A='A <a@example.com>'
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    set -e
|    :+    hg init testrepo
|    :+    cd testrepo
|    :+    cp ../createrepo.zsh .
|    :+    # XXX Date test will work only till 2099
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+    hg tag ablines \
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+    hg tag blines \
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+    hg tag clines \
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+        --date '2002-01-01 00:00' --user $C
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 flines.lst
|    :--- /dev/null
|    :+++ b/flines.lst
|    :@@ -0,0 +1,12 @@
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg update default
|    :+    hg commit -m 'Merge from C' \
|    :+    hg commit -m 'Merge from B' \
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg commit -m 'Merge from A' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+tar cJf testrepo.tar.xz testrepo
|    :diff -r 5afd628b0861 -r e1eaeea486e4 glines.lst
|    :--- /dev/null
|    :+++ b/glines.lst
|    :@@ -0,0 +1,59 @@
|    :+local B='B <b@example.org>'
|    :+local C='C <c@example.gov>'
|    :+    hg init testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+    hg mv createrepo.zsh crepo.zsh
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+    hg mv crepo.zsh chgrepo.zsh
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+    hg branch A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+    hg branch B
|    :+    cat chgrepo.zsh | grep 'a' > alines.lst
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+    hg branch C
|    :+    cat alines.lst | grep 'b' > ablines.lst
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+    hg tag ablines \
|    :+    hg update default
|    :+    hg merge -r ablines
|    :+    hg commit -m 'Merge from C' \
|    :+    hg update C
|    :+    cat chgrepo.zsh | grep 'b' > blines.lst
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+    hg tag blines \
|    :+    hg update -r -2
|    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+    hg tag clines \
|    :+    hg update A
|    :+    hg merge -r B
|    :+    hg commit -m 'Merge from B' \
|    :+    hg merge -r clines
|    :+    hg commit -m 'Merge from C:2' \
|    :+    hg update default
|    :+    hg merge -r blines
|    :+    hg commit -m 'Merge from C:1' \
|    :+    hg merge -r A
|    :+    hg commit -m 'Merge from A' \
|    :+    hg cp hglines.lst hglines2.lst
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+    cat nohglines.lst | rev > nohglinesrev.lst
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+    echo abc >> nohglinesrev.lst
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    hg rm hglines2.lst
|    :+    rm nohglines.lst
|    :+    cat hglines.lst | rev > hglinesrev.lst
|    :+    echo 'Abc' > ignoredabc
|    :
o  22: A 2002-02-11 Added tag oldtag for changeset 023aa55bd806
|  $  .hgtags | 1 0
|  $1 files changed, 1 insertions, 0 deletions
|  :diff -r e85aa09aab16 -r 5afd628b0861 .hgtags
|  :--- a/.hgtags
|  :+++ b/.hgtags
|  :@@ -1,1 +1,2 @@
|  : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
|  :+023aa55bd8062179ce36adbdd78363e9b88718c1 oldtag
|  :
o  21: A 2002-02-11 Added ignored10.lst
|  $  ignored10.lst | 10 0
|  $1 files changed, 10 insertions, 0 deletions
|  :diff -r 67cf252de26b -r e85aa09aab16 ignored10.lst
|  :--- /dev/null
|  :+++ b/ignored10.lst
|  :@@ -0,0 +1,10 @@
|  :+1
|  :+2
|  :+3
|  :+4
|  :+5
|  :+6
|  :+7
|  :+8
|  :+9
|  :+10
|  :
o  20: B 2002-02-10 Added nohglinesrev.lst
|  $  nohglinesrev.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r 456e0b05b81a -r 67cf252de26b nohglinesrev.lst
|  :--- /dev/null
|  :+++ b/nohglinesrev.lst
|  :@@ -0,0 +1,53 @@
|  :+hsz/nib/!#
|  :+hsz L- etalume
|  :+e- tes
|  :+'>moc.elpmaxe@a< A'=A lacol
|  :+'>gro.elpmaxe@b< B'=B lacol
|  :+'>vog.elpmaxe@c< C'=C lacol
|  :+{
|  :+e- tes    
|  :+opertset dc    
|  :+. hsz.operetaerc/.. pc    
|  :+9902 llit ylno krow lliw tset etaD XXX #    
|  :+A$ resu-- '02:5 20-10-9991' etad--        
|  :+A$ resu-- '03:7 50-10-0002' etad--        
|  :+hsz.operc '/}{/}{/rt' e- i- p- lrep    
|  :+B$ resu-- '00:51 51-10-0002' etad--        
|  :+B$ resu-- '00:41 10-20-0002' etad--        
|  :+tsl.senilgh > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+tsl.seniletad > '/ gh    ^/ sselnu _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+A$ resu-- '32:4 01-50-0002' etad--        
|  :+tsl.senild > 'd' perg | hsz.operghc tac    
|  :+B$ resu-- '42:31 10-11-0002' etad--        
|  :+tsl.senila > 'a' perg | hsz.operghc tac    
|  :+A$ resu-- '44:5 20-11-0002' etad--        
|  :+tsl.senilba > 'b' perg | tsl.senila tac    
|  :+B$ resu-- '31:41 20-11-0002' etad--        
|  :+B$ resu-- '41:41 20-11-0002' etad--        
|  :+C$ resu-- '00:00 10-10-1002' etad--        
|  :+tsl.senilb > 'b' perg | hsz.operghc tac    
|  :+A$ resu-- '81:50 10-20-1002' etad--        
|  :+A$ resu-- '91:50 10-20-1002' etad--        
|  :+tsl.senilc > 'c' perg | tros | hsz.operghc tac    
|  :+B$ resu-- '65:41 10-20-1002' etad--        
|  :+B$ resu-- '25:65:41 10-20-1002' etad--        
|  :+C$ resu-- '00:00 10-10-2002' etad--        
|  :+C$ resu-- '51:00:00 10-10-2002' etad--        
|  :+C$ resu-- '03:00:00 10-10-2002' etad--        
|  :+C$ resu-- '54:00:00 10-10-2002' etad--        
|  :+A$ resu-- '00:50 01-20-2002' etad--        
|  :+tsl.senilghon > '/ gh    ^/ fi _$ fednu' e- i- p- lrep | hsz.operghc tac    
|  :+B$ resu-- '33:51 01-20-2002' etad--        
|  :+tsl.versenilghon > ver | tsl.senilghon tac    
|  :+B$ resu-- '10:61 01-20-2002' etad--        
|  :+tsl.01derongi > 'n\'$ ' ' rt | 01 1 qes    
|  :+A$ resu-- '51:30 11-20-2002' etad--        
|  :+erongigh. > '*derongin\bolg :xatnys'$ ohce    
|  :+A$ resu-- '34:50 11-20-2002' etad--        
|  :+tsl.versenilghon >> cba ohce    
|  :+feddedda dda gh && feddedda > 'feD' ohce    
|  :+tsl.senilghon mr    
|  :+tsl.versenilgh > ver | tsl.senilgh tac    
|  :+cbaderongi > 'cbA' ohce    
|  :+}
|  :+opertset zx.rat.opertset fJc rat
|  :
o  19: B 2002-02-10 Added nohglines.lst
|  $  nohglines.lst | 53 0
|  $1 files changed, 53 insertions, 0 deletions
|  :diff -r f44a21859e57 -r 456e0b05b81a nohglines.lst
|  :--- /dev/null
|  :+++ b/nohglines.lst
|  :@@ -0,0 +1,53 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+        --date '1999-01-02 5:20' --user $A
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+        --date '2000-01-15 15:00' --user $B
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+        --date '2000-11-02 14:13' --user $B
|  :+        --date '2000-11-02 14:14' --user $B
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+        --date '2001-02-01 05:18' --user $A
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+        --date '2001-02-01 14:56' --user $B
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+        --date '2002-01-01 00:00' --user $C
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :
o  18: A 2002-02-10 Copied “hglines.lst” to “hglines2.lst”
|  $  hglines2.lst | 41 0
|  $1 files changed, 41 insertions, 0 deletions
|  :diff -r e5648a3eea57 -r f44a21859e57 hglines2.lst
|  :--- /dev/null
|  :+++ b/hglines2.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
o    17: C 2002-01-01 [merge] Merge from A
|\   $  clines.lst | 49 0
| |  $1 files changed, 49 insertions, 0 deletions
| |  :diff -r 462a1e95be86 -r e5648a3eea57 clines.lst
| |  :--- /dev/null
| |  :+++ b/clines.lst
| |  :@@ -0,0 +1,49 @@
| |  :+    cat alines.lst | grep 'b' > ablines.lst
| |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |  :+    cat hglines.lst | rev > hglinesrev.lst
| |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| |  :+    cd testrepo
| |  :+    cp ../createrepo.zsh .
| |  :+    echo 'Abc' > ignoredabc
| |  :+    echo abc >> nohglinesrev.lst
| |  :+    echo 'Def' > addeddef && hg add addeddef
| |  :+    echo $'syntax: glob\nignored*' > .hgignore
| |  :+    hg branch A
| |  :+    hg branch B
| |  :+    hg branch C
| |  :+    hg commit -A -m 'Added ablines.lst' \
| |  :+    hg commit -A -m 'Added alines.lst' \
| |  :+    hg commit -A -m 'Added blines.lst' \
| |  :+    hg commit -A -m 'Added clines.lst' \
| |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |  :+    hg commit -A -m 'Added dlines.lst' \
| |  :+    hg commit -A -m 'Added .hgignore' \
| |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |  :+    hg commit -A -m 'Added ignored10.lst' \
| |  :+    hg commit -A -m 'Added nohglines.lst' \
| |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |  :+    hg commit -m 'Merge from A' \
| |  :+    hg commit -m 'Merge from B' \
| |  :+    hg commit -m 'Merge from C' \
| |  :+    hg commit -m 'Merge from C:1' \
| |  :+    hg commit -m 'Merge from C:2' \
| |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |  :+    hg cp hglines.lst hglines2.lst
| |  :+    hg merge -r clines
| |  :+    hg mv createrepo.zsh crepo.zsh
| |  :+    hg mv crepo.zsh chgrepo.zsh
| |  :+    hg tag clines \
| |  :+local A='A <a@example.com>'
| |  :+local B='B <b@example.org>'
| |  :+local C='C <c@example.gov>'
| |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| |  :+tar cJf testrepo.tar.xz testrepo
| |  :
o |    16: C 2002-01-01 [merge] Merge from C:1
|\ \   $  .hgtags    |  1 0
| | |  $  blines.lst | 16 0
| | |  $2 files changed, 17 insertions, 0 deletions
| | |  :diff -r 269399222040 -r 462a1e95be86 .hgtags
| | |  :--- /dev/null
| | |  :+++ b/.hgtags
| | |  :@@ -0,0 +1,1 @@
| | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | |  :diff -r 269399222040 -r 462a1e95be86 blines.lst
| | |  :--- /dev/null
| | |  :+++ b/blines.lst
| | |  :@@ -0,0 +1,16 @@
| | |  :+#!/bin/zsh
| | |  :+local B='B <b@example.org>'
| | |  :+    hg branch A
| | |  :+    hg branch B
| | |  :+    hg branch C
| | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | |  :+    hg commit -A -m 'Added ablines.lst' \
| | |  :+    hg tag ablines \
| | |  :+    hg merge -r ablines
| | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |  :+    hg commit -A -m 'Added blines.lst' \
| | |  :+    hg tag blines \
| | |  :+    hg merge -r blines
| | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | |  :+    echo abc >> nohglinesrev.lst
| | |  :+    echo 'Abc' > ignoredabc
| | |  :
| | o    15: C 2002-01-01 [merge] Merge from C:2
| | |\   $  .hgtags     |  1 0
| | | |  $  ablines.lst | 13 0
| | | |  $  blines.lst  | 16 0
| | | |  $  clines.lst  | 49 0
| | | |  $4 files changed, 79 insertions, 0 deletions
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 .hgtags
| | | |  :--- /dev/null
| | | |  :+++ b/.hgtags
| | | |  :@@ -0,0 +1,1 @@
| | | |  :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 ablines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/ablines.lst
| | | |  :@@ -0,0 +1,13 @@
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg tag blines \
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :diff -r 5e2f73d0c01d -r be92227e3e43 clines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/clines.lst
| | | |  :@@ -0,0 +1,49 @@
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |  :+    cd testrepo
| | | |  :+    cp ../createrepo.zsh .
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |  :+    hg commit -m 'Merge from A' \
| | | |  :+    hg commit -m 'Merge from B' \
| | | |  :+    hg commit -m 'Merge from C' \
| | | |  :+    hg commit -m 'Merge from C:1' \
| | | |  :+    hg commit -m 'Merge from C:2' \
| | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |  :+    hg cp hglines.lst hglines2.lst
| | | |  :+    hg merge -r clines
| | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | |  :+    hg mv crepo.zsh chgrepo.zsh
| | | |  :+    hg tag clines \
| | | |  :+local A='A <a@example.com>'
| | | |  :+local B='B <b@example.org>'
| | | |  :+local C='C <c@example.gov>'
| | | |  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |  :+tar cJf testrepo.tar.xz testrepo
| | | |  :
| | o |    14: C 2002-01-01 [merge] Merge from B
| | |\ \   $  alines.lst | 64 0
| | | | |  $1 files changed, 64 insertions, 0 deletions
| | | | |  :diff -r d760b0fe4fe4 -r 5e2f73d0c01d alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :
| | | | | o  13: B 2001-02-01 Added tag clines for changeset 023aa55bd806
| | | | |/   $  .hgtags | 1 0
| | | | |    $1 files changed, 1 insertions, 0 deletions
| | | | |    :diff -r 023aa55bd806 -r 14b19ea42f82 .hgtags
| | | | |    :--- a/.hgtags
| | | | |    :+++ b/.hgtags
| | | | |    :@@ -1,1 +1,2 @@
| | | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | | |    :+023aa55bd8062179ce36adbdd78363e9b88718c1 clines
| | | | |    :
| +-----o  12: B 2001-02-01 {clines, oldtag} Added clines.lst
| | | |    $  clines.lst | 49 0
| | | |    $1 files changed, 49 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 023aa55bd806 clines.lst
| | | |    :--- /dev/null
| | | |    :+++ b/clines.lst
| | | |    :@@ -0,0 +1,49 @@
| | | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | | |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | |    :+    cat hglines.lst | rev > hglinesrev.lst
| | | |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | |    :+    cd testrepo
| | | |    :+    cp ../createrepo.zsh .
| | | |    :+    echo 'Abc' > ignoredabc
| | | |    :+    echo abc >> nohglinesrev.lst
| | | |    :+    echo 'Def' > addeddef && hg add addeddef
| | | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |    :+    hg branch A
| | | |    :+    hg branch B
| | | |    :+    hg branch C
| | | |    :+    hg commit -A -m 'Added ablines.lst' \
| | | |    :+    hg commit -A -m 'Added alines.lst' \
| | | |    :+    hg commit -A -m 'Added blines.lst' \
| | | |    :+    hg commit -A -m 'Added clines.lst' \
| | | |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | |    :+    hg commit -A -m 'Added dlines.lst' \
| | | |    :+    hg commit -A -m 'Added .hgignore' \
| | | |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | |    :+    hg commit -A -m 'Added ignored10.lst' \
| | | |    :+    hg commit -A -m 'Added nohglines.lst' \
| | | |    :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | |    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | |    :+    hg commit -m 'Merge from A' \
| | | |    :+    hg commit -m 'Merge from B' \
| | | |    :+    hg commit -m 'Merge from C' \
| | | |    :+    hg commit -m 'Merge from C:1' \
| | | |    :+    hg commit -m 'Merge from C:2' \
| | | |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | |    :+    hg cp hglines.lst hglines2.lst
| | | |    :+    hg merge -r clines
| | | |    :+    hg mv createrepo.zsh crepo.zsh
| | | |    :+    hg mv crepo.zsh chgrepo.zsh
| | | |    :+    hg tag clines \
| | | |    :+local A='A <a@example.com>'
| | | |    :+local B='B <b@example.org>'
| | | |    :+local C='C <c@example.gov>'
| | | |    :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
| | | |    :+tar cJf testrepo.tar.xz testrepo
| | | |    :
| +-----o  11: A 2001-02-01 Added tag blines for changeset c4110a066208
| | | |    $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c4110a066208 -r 0e6e0adf281b .hgtags
| | | |    :--- a/.hgtags
| | | |    :+++ b/.hgtags
| | | |    :@@ -1,1 +1,2 @@
| | | |    : c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :+c4110a066208167dae46b08f4e0d8d2b37e842f3 blines
| | | |    :
| o | |  10: A 2001-02-01 {blines} Added blines.lst
| | | |  $  blines.lst | 16 0
| | | |  $1 files changed, 16 insertions, 0 deletions
| | | |  :diff -r 250ba7cd831e -r c4110a066208 blines.lst
| | | |  :--- /dev/null
| | | |  :+++ b/blines.lst
| | | |  :@@ -0,0 +1,16 @@
| | | |  :+#!/bin/zsh
| | | |  :+local B='B <b@example.org>'
| | | |  :+    hg branch A
| | | |  :+    hg branch B
| | | |  :+    hg branch C
| | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | |  :+    hg tag ablines \
| | | |  :+    hg merge -r ablines
| | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | |  :+    hg tag blines \
| | | |  :+    hg merge -r blines
| | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | |  :+    echo abc >> nohglinesrev.lst
| | | |  :+    echo 'Abc' > ignoredabc
| | | |  :
o | | |    9: C 2001-01-01 [merge] Merge from C
|\ \ \ \   $  ablines.lst |  13 0
| | | | |  $  alines.lst  |  64 0
| | | | |  $  dlines.lst  |  52 0
| | | | |  $3 files changed, 129 insertions, 0 deletions
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 ablines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/ablines.lst
| | | | |  :@@ -0,0 +1,13 @@
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+    hg branch A
| | | | |  :+    hg branch B
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+    hg tag ablines \
| | | | |  :+    hg merge -r ablines
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+    hg tag blines \
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 alines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/alines.lst
| | | | |  :@@ -0,0 +1,64 @@
| | | | |  :+emulate -L zsh
| | | | |  :+local A='A <a@example.com>'
| | | | |  :+local B='B <b@example.org>'
| | | | |  :+local C='C <c@example.gov>'
| | | | |  :+    cp ../createrepo.zsh .
| | | | |  :+    # XXX Date test will work only till 2099
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg mv createrepo.zsh crepo.zsh
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    hg branch A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg branch B
| | | | |  :+    cat chgrepo.zsh | grep 'a' > alines.lst
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg branch C
| | | | |  :+    cat alines.lst | grep 'b' > ablines.lst
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+    hg tag ablines \
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+    hg merge -r ablines
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+    hg tag blines \
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+    hg tag clines \
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    cat nohglines.lst | rev > nohglinesrev.lst
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo abc >> nohglinesrev.lst
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    cat hglines.lst | rev > hglinesrev.lst
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :+tar cJf testrepo.tar.xz testrepo
| | | | |  :diff -r 7e16e7cbaf9e -r 269399222040 dlines.lst
| | | | |  :--- /dev/null
| | | | |  :+++ b/dlines.lst
| | | | |  :@@ -0,0 +1,52 @@
| | | | |  :+    cd testrepo
| | | | |  :+    hg commit -A -m 'Added «createrepo.zsh»' \
| | | | |  :+        --date '1999-01-02 5:20' --user $A
| | | | |  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| | | | |  :+        --date '2000-01-05 7:30' --user $A
| | | | |  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| | | | |  :+        --date '2000-01-15 15:00' --user $B
| | | | |  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| | | | |  :+        --date '2000-02-01 14:00' --user $B
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| | | | |  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| | | | |  :+        --date '2000-05-10 4:23' --user $A
| | | | |  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| | | | |  :+    hg commit -A -m 'Added dlines.lst' \
| | | | |  :+        --date '2000-11-01 13:24' --user $B
| | | | |  :+    hg commit -A -m 'Added alines.lst' \
| | | | |  :+        --date '2000-11-02 5:44' --user $A
| | | | |  :+    hg commit -A -m 'Added ablines.lst' \
| | | | |  :+        --date '2000-11-02 14:13' --user $B
| | | | |  :+        --date '2000-11-02 14:14' --user $B
| | | | |  :+    hg update default
| | | | |  :+        --date '2001-01-01 00:00' --user $C
| | | | |  :+    hg update C
| | | | |  :+    hg commit -A -m 'Added blines.lst' \
| | | | |  :+        --date '2001-02-01 05:18' --user $A
| | | | |  :+        --date '2001-02-01 05:19' --user $A
| | | | |  :+    hg update -r -2
| | | | |  :+    hg commit -A -m 'Added clines.lst' \
| | | | |  :+        --date '2001-02-01 14:56' --user $B
| | | | |  :+        --date '2001-02-01 14:56:52' --user $B
| | | | |  :+    hg update A
| | | | |  :+        --date '2002-01-01 00:00' --user $C
| | | | |  :+        --date '2002-01-01 00:00:15' --user $C
| | | | |  :+    hg update default
| | | | |  :+        --date '2002-01-01 00:00:30' --user $C
| | | | |  :+        --date '2002-01-01 00:00:45' --user $C
| | | | |  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
| | | | |  :+        --date '2002-02-10 05:00' --user $A
| | | | |  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| | | | |  :+    hg commit -A -m 'Added nohglines.lst' \
| | | | |  :+        --date '2002-02-10 15:33' --user $B
| | | | |  :+    hg commit -A -m 'Added nohglinesrev.lst' \
| | | | |  :+        --date '2002-02-10 16:01' --user $B
| | | | |  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
| | | | |  :+    hg commit -A -m 'Added ignored10.lst' \
| | | | |  :+        --date '2002-02-11 03:15' --user $A
| | | | |  :+    echo $'syntax: glob\nignored*' > .hgignore
| | | | |  :+    hg commit -A -m 'Added .hgignore' \
| | | | |  :+        --date '2002-02-11 05:43' --user $A
| | | | |  :+    echo 'Def' > addeddef && hg add addeddef
| | | | |  :+    echo 'Abc' > ignoredabc
| | | | |  :
| | o | |  8: B 2000-11-02 Added tag ablines for changeset c06107b7bcbe
| |/ / /   $  .hgtags | 1 0
| | | |    $1 files changed, 1 insertions, 0 deletions
| | | |    :diff -r c06107b7bcbe -r 250ba7cd831e .hgtags
| | | |    :--- /dev/null
| | | |    :+++ b/.hgtags
| | | |    :@@ -0,0 +1,1 @@
| | | |    :+c06107b7bcbe751d2dd40faf4179ee7d6aac44ac ablines
| | | |    :
| o---+  7: B 2000-11-02 {ablines} Added ablines.lst
|   | |  $  ablines.lst | 13 0
|  / /   $1 files changed, 13 insertions, 0 deletions
| | |    :diff -r 9fe0c28c3e1d -r c06107b7bcbe ablines.lst
| | |    :--- /dev/null
| | |    :+++ b/ablines.lst
| | |    :@@ -0,0 +1,13 @@
| | |    :+local B='B <b@example.org>'
| | |    :+    hg branch A
| | |    :+    hg branch B
| | |    :+    hg branch C
| | |    :+    cat alines.lst | grep 'b' > ablines.lst
| | |    :+    hg commit -A -m 'Added ablines.lst' \
| | |    :+    hg tag ablines \
| | |    :+    hg merge -r ablines
| | |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| | |    :+    hg tag blines \
| | |    :+    echo $'syntax: glob\nignored*' > .hgignore
| | |    :+    echo abc >> nohglinesrev.lst
| | |    :+    echo 'Abc' > ignoredabc
| | |    :
| | o  6: A 2000-11-02 Added alines.lst
| |/   $  alines.lst | 64 0
| |    $1 files changed, 64 insertions, 0 deletions
| |    :diff -r d760b0fe4fe4 -r 9fe0c28c3e1d alines.lst
| |    :--- /dev/null
| |    :+++ b/alines.lst
| |    :@@ -0,0 +1,64 @@
| |    :+emulate -L zsh
| |    :+local A='A <a@example.com>'
| |    :+local B='B <b@example.org>'
| |    :+local C='C <c@example.gov>'
| |    :+    cp ../createrepo.zsh .
| |    :+    # XXX Date test will work only till 2099
| |    :+    hg commit -A -m 'Added «createrepo.zsh»' \
| |    :+        --date '1999-01-02 5:20' --user $A
| |    :+    hg mv createrepo.zsh crepo.zsh
| |    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
| |    :+        --date '2000-01-05 7:30' --user $A
| |    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
| |    :+        --date '2000-01-15 15:00' --user $B
| |    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
| |    :+        --date '2000-02-01 14:00' --user $B
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
| |    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
| |    :+        --date '2000-05-10 4:23' --user $A
| |    :+    hg branch A
| |    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
| |    :+        --date '2000-11-01 13:24' --user $B
| |    :+    hg branch B
| |    :+    cat chgrepo.zsh | grep 'a' > alines.lst
| |    :+    hg commit -A -m 'Added alines.lst' \
| |    :+        --date '2000-11-02 5:44' --user $A
| |    :+    hg branch C
| |    :+    cat alines.lst | grep 'b' > ablines.lst
| |    :+    hg commit -A -m 'Added ablines.lst' \
| |    :+        --date '2000-11-02 14:13' --user $B
| |    :+    hg tag ablines \
| |    :+        --date '2000-11-02 14:14' --user $B
| |    :+    hg update default
| |    :+    hg merge -r ablines
| |    :+        --date '2001-01-01 00:00' --user $C
| |    :+    hg update C
| |    :+    cat chgrepo.zsh | grep 'b' > blines.lst
| |    :+        --date '2001-02-01 05:18' --user $A
| |    :+    hg tag blines \
| |    :+        --date '2001-02-01 05:19' --user $A
| |    :+    hg update -r -2
| |    :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
| |    :+        --date '2001-02-01 14:56' --user $B
| |    :+    hg tag clines \
| |    :+        --date '2001-02-01 14:56:52' --user $B
| |    :+    hg update A
| |    :+        --date '2002-01-01 00:00' --user $C
| |    :+        --date '2002-01-01 00:00:15' --user $C
| |    :+    hg update default
| |    :+        --date '2002-01-01 00:00:30' --user $C
| |    :+        --date '2002-01-01 00:00:45' --user $C
| |    :+        --date '2002-02-10 05:00' --user $A
| |    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
| |    :+        --date '2002-02-10 15:33' --user $B
| |    :+    cat nohglines.lst | rev > nohglinesrev.lst
| |    :+        --date '2002-02-10 16:01' --user $B
| |    :+        --date '2002-02-11 03:15' --user $A
| |    :+    echo $'syntax: glob\nignored*' > .hgignore
| |    :+        --date '2002-02-11 05:43' --user $A
| |    :+    echo abc >> nohglinesrev.lst
| |    :+    echo 'Def' > addeddef && hg add addeddef
| |    :+    cat hglines.lst | rev > hglinesrev.lst
| |    :+    echo 'Abc' > ignoredabc
| |    :+tar cJf testrepo.tar.xz testrepo
| |    :
| o  5: B 2000-11-01 Added dlines.lst
|/   $  dlines.lst | 52 0
|    $1 files changed, 52 insertions, 0 deletions
|    :diff -r 7e16e7cbaf9e -r d760b0fe4fe4 dlines.lst
|    :--- /dev/null
|    :+++ b/dlines.lst
|    :@@ -0,0 +1,52 @@
|    :+    cd testrepo
|    :+    hg commit -A -m 'Added «createrepo.zsh»' \
|    :+        --date '1999-01-02 5:20' --user $A
|    :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|    :+        --date '2000-01-05 7:30' --user $A
|    :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|    :+        --date '2000-01-15 15:00' --user $B
|    :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|    :+        --date '2000-02-01 14:00' --user $B
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|    :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|    :+        --date '2000-05-10 4:23' --user $A
|    :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|    :+    hg commit -A -m 'Added dlines.lst' \
|    :+        --date '2000-11-01 13:24' --user $B
|    :+    hg commit -A -m 'Added alines.lst' \
|    :+        --date '2000-11-02 5:44' --user $A
|    :+    hg commit -A -m 'Added ablines.lst' \
|    :+        --date '2000-11-02 14:13' --user $B
|    :+        --date '2000-11-02 14:14' --user $B
|    :+    hg update default
|    :+        --date '2001-01-01 00:00' --user $C
|    :+    hg update C
|    :+    hg commit -A -m 'Added blines.lst' \
|    :+        --date '2001-02-01 05:18' --user $A
|    :+        --date '2001-02-01 05:19' --user $A
|    :+    hg update -r -2
|    :+    hg commit -A -m 'Added clines.lst' \
|    :+        --date '2001-02-01 14:56' --user $B
|    :+        --date '2001-02-01 14:56:52' --user $B
|    :+    hg update A
|    :+        --date '2002-01-01 00:00' --user $C
|    :+        --date '2002-01-01 00:00:15' --user $C
|    :+    hg update default
|    :+        --date '2002-01-01 00:00:30' --user $C
|    :+        --date '2002-01-01 00:00:45' --user $C
|    :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|    :+        --date '2002-02-10 05:00' --user $A
|    :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|    :+    hg commit -A -m 'Added nohglines.lst' \
|    :+        --date '2002-02-10 15:33' --user $B
|    :+    hg commit -A -m 'Added nohglinesrev.lst' \
|    :+        --date '2002-02-10 16:01' --user $B
|    :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|    :+    hg commit -A -m 'Added ignored10.lst' \
|    :+        --date '2002-02-11 03:15' --user $A
|    :+    echo $'syntax: glob\nignored*' > .hgignore
|    :+    hg commit -A -m 'Added .hgignore' \
|    :+        --date '2002-02-11 05:43' --user $A
|    :+    echo 'Def' > addeddef && hg add addeddef
|    :+    echo 'Abc' > ignoredabc
|    :
o  4: A 2000-05-10 Added «hglines.lst» and «datelines.lst»
|  $  datelines.lst | 41 0
|  $  hglines.lst   | 41 0
|  $2 files changed, 82 insertions, 0 deletions
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e datelines.lst
|  :--- /dev/null
|  :+++ b/datelines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :diff -r a16a47a8d7aa -r 7e16e7cbaf9e hglines.lst
|  :--- /dev/null
|  :+++ b/hglines.lst
|  :@@ -0,0 +1,41 @@
|  :+    hg init testrepo
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+    hg branch A
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+    hg branch B
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+    hg branch C
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+    hg tag ablines \
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+    hg update C
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+    hg tag blines \
|  :+    hg update -r -2
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+    hg tag clines \
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+    hg rm hglines2.lst
|  :
o  3: B 2000-02-01 Renamed «crepo.zsh» to «chgrepo.zsh»
|  $  chgrepo.zsh | 94  0
|  $  crepo.zsh   |  0 94
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa chgrepo.zsh
|  :--- /dev/null
|  :+++ b/chgrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+{
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+}
|  :+tar cJf testrepo.tar.xz testrepo
|  :diff -r 5a6a1bf999fa -r a16a47a8d7aa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-{
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-}
|  :-tar cJf testrepo.tar.xz testrepo
|  :
o  2: B 2000-01-15 Replaced
|  $  crepo.zsh | 4 4
|  $1 files changed, 4 insertions, 4 deletions
|  :diff -r dfe39aa48c6d -r 5a6a1bf999fa crepo.zsh
|  :--- a/crepo.zsh
|  :+++ b/crepo.zsh
|  :@@ -4,7 +4,7 @@
|  : local A='A <a@example.com>'
|  : local B='B <b@example.org>'
|  : local C='C <c@example.gov>'
|  :-(
|  :+{
|  :     set -e
|  :     hg init testrepo
|  :     cd testrepo
|  :@@ -15,8 +15,8 @@
|  :     hg mv createrepo.zsh crepo.zsh
|  :     hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :         --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+    perl -p -i -e 'tr/{}/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    {\n        ...\n    }\nwith\n    {\n        ...\n    }' \
|  :         --date '2000-01-15 15:00' --user $B
|  :     hg mv crepo.zsh chgrepo.zsh
|  :     hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :@@ -90,5 +90,5 @@
|  :     rm nohglines.lst
|  :     cat hglines.lst | rev > hglinesrev.lst
|  :     echo 'Abc' > ignoredabc
|  :-)
|  :+}
|  : tar cJf testrepo.tar.xz testrepo
|  :
o  1: A 2000-01-05 Renamed «createrepo.zsh» to «crepo.zsh»
|  $  createrepo.zsh |  0 94
|  $  crepo.zsh      | 94  0
|  $2 files changed, 94 insertions, 94 deletions
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d createrepo.zsh
|  :--- a/createrepo.zsh
|  :+++ /dev/null
|  :@@ -1,94 +0,0 @@
|  :-#!/bin/zsh
|  :-emulate -L zsh
|  :-set -e
|  :-local A='A <a@example.com>'
|  :-local B='B <b@example.org>'
|  :-local C='C <c@example.gov>'
|  :-(
|  :-    set -e
|  :-    hg init testrepo
|  :-    cd testrepo
|  :-    cp ../createrepo.zsh .
|  :-    # XXX Date test will work only till 2099
|  :-    hg commit -A -m 'Added «createrepo.zsh»' \
|  :-        --date '1999-01-02 5:20' --user $A
|  :-    hg mv createrepo.zsh crepo.zsh
|  :-    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :-        --date '2000-01-05 7:30' --user $A
|  :-    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :-    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :-        --date '2000-01-15 15:00' --user $B
|  :-    hg mv crepo.zsh chgrepo.zsh
|  :-    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :-        --date '2000-02-01 14:00' --user $B
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :-    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :-        --date '2000-05-10 4:23' --user $A
|  :-    hg branch A
|  :-    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :-    hg commit -A -m 'Added dlines.lst' \
|  :-        --date '2000-11-01 13:24' --user $B
|  :-    hg branch B
|  :-    cat chgrepo.zsh | grep 'a' > alines.lst
|  :-    hg commit -A -m 'Added alines.lst' \
|  :-        --date '2000-11-02 5:44' --user $A
|  :-    hg branch C
|  :-    cat alines.lst | grep 'b' > ablines.lst
|  :-    hg commit -A -m 'Added ablines.lst' \
|  :-        --date '2000-11-02 14:13' --user $B
|  :-    hg tag ablines \
|  :-        --date '2000-11-02 14:14' --user $B
|  :-    hg update default
|  :-    hg merge -r ablines
|  :-    hg commit -m 'Merge from C' \
|  :-        --date '2001-01-01 00:00' --user $C
|  :-    hg update C
|  :-    cat chgrepo.zsh | grep 'b' > blines.lst
|  :-    hg commit -A -m 'Added blines.lst' \
|  :-        --date '2001-02-01 05:18' --user $A
|  :-    hg tag blines \
|  :-        --date '2001-02-01 05:19' --user $A
|  :-    hg update -r -2
|  :-    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :-    hg commit -A -m 'Added clines.lst' \
|  :-        --date '2001-02-01 14:56' --user $B
|  :-    hg tag clines \
|  :-        --date '2001-02-01 14:56:52' --user $B
|  :-    hg update A
|  :-    hg merge -r B
|  :-    hg commit -m 'Merge from B' \
|  :-        --date '2002-01-01 00:00' --user $C
|  :-    hg merge -r clines
|  :-    hg commit -m 'Merge from C:2' \
|  :-        --date '2002-01-01 00:00:15' --user $C
|  :-    hg update default
|  :-    hg merge -r blines
|  :-    hg commit -m 'Merge from C:1' \
|  :-        --date '2002-01-01 00:00:30' --user $C
|  :-    hg merge -r A
|  :-    hg commit -m 'Merge from A' \
|  :-        --date '2002-01-01 00:00:45' --user $C
|  :-    hg cp hglines.lst hglines2.lst
|  :-    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :-        --date '2002-02-10 05:00' --user $A
|  :-    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :-    hg commit -A -m 'Added nohglines.lst' \
|  :-        --date '2002-02-10 15:33' --user $B
|  :-    cat nohglines.lst | rev > nohglinesrev.lst
|  :-    hg commit -A -m 'Added nohglinesrev.lst' \
|  :-        --date '2002-02-10 16:01' --user $B
|  :-    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :-    hg commit -A -m 'Added ignored10.lst' \
|  :-        --date '2002-02-11 03:15' --user $A
|  :-    echo $'syntax: glob\nignored*' > .hgignore
|  :-    hg commit -A -m 'Added .hgignore' \
|  :-        --date '2002-02-11 05:43' --user $A
|  :-    echo abc >> nohglinesrev.lst
|  :-    echo 'Def' > addeddef && hg add addeddef
|  :-    hg rm hglines2.lst
|  :-    rm nohglines.lst
|  :-    cat hglines.lst | rev > hglinesrev.lst
|  :-    echo 'Abc' > ignoredabc
|  :-)
|  :-tar cJf testrepo.tar.xz testrepo
|  :diff -r 99ea42d70fbe -r dfe39aa48c6d crepo.zsh
|  :--- /dev/null
|  :+++ b/crepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
o  0: A 1999-01-02 Added «createrepo.zsh»
|  $  createrepo.zsh | 94 0
|  $1 files changed, 94 insertions, 0 deletions
|  :diff -r 000000000000 -r 99ea42d70fbe createrepo.zsh
|  :--- /dev/null
|  :+++ b/createrepo.zsh
|  :@@ -0,0 +1,94 @@
|  :+#!/bin/zsh
|  :+emulate -L zsh
|  :+set -e
|  :+local A='A <a@example.com>'
|  :+local B='B <b@example.org>'
|  :+local C='C <c@example.gov>'
|  :+(
|  :+    set -e
|  :+    hg init testrepo
|  :+    cd testrepo
|  :+    cp ../createrepo.zsh .
|  :+    # XXX Date test will work only till 2099
|  :+    hg commit -A -m 'Added «createrepo.zsh»' \
|  :+        --date '1999-01-02 5:20' --user $A
|  :+    hg mv createrepo.zsh crepo.zsh
|  :+    hg commit -A -m 'Renamed «createrepo.zsh» to «crepo.zsh»' \
|  :+        --date '2000-01-05 7:30' --user $A
|  :+    perl -p -i -e 'tr/()/{}/' crepo.zsh
|  :+    hg commit -m $'Replaced\n    (\n        ...\n    )\nwith\n    {\n        ...\n    }' \
|  :+        --date '2000-01-15 15:00' --user $B
|  :+    hg mv crepo.zsh chgrepo.zsh
|  :+    hg commit -A -m 'Renamed «crepo.zsh» to «chgrepo.zsh»' \
|  :+        --date '2000-02-01 14:00' --user $B
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > hglines.lst
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ unless /^    hg /' > datelines.lst
|  :+    hg commit -A -m 'Added «hglines.lst» and «datelines.lst»' \
|  :+        --date '2000-05-10 4:23' --user $A
|  :+    hg branch A
|  :+    cat chgrepo.zsh | grep 'd' > dlines.lst
|  :+    hg commit -A -m 'Added dlines.lst' \
|  :+        --date '2000-11-01 13:24' --user $B
|  :+    hg branch B
|  :+    cat chgrepo.zsh | grep 'a' > alines.lst
|  :+    hg commit -A -m 'Added alines.lst' \
|  :+        --date '2000-11-02 5:44' --user $A
|  :+    hg branch C
|  :+    cat alines.lst | grep 'b' > ablines.lst
|  :+    hg commit -A -m 'Added ablines.lst' \
|  :+        --date '2000-11-02 14:13' --user $B
|  :+    hg tag ablines \
|  :+        --date '2000-11-02 14:14' --user $B
|  :+    hg update default
|  :+    hg merge -r ablines
|  :+    hg commit -m 'Merge from C' \
|  :+        --date '2001-01-01 00:00' --user $C
|  :+    hg update C
|  :+    cat chgrepo.zsh | grep 'b' > blines.lst
|  :+    hg commit -A -m 'Added blines.lst' \
|  :+        --date '2001-02-01 05:18' --user $A
|  :+    hg tag blines \
|  :+        --date '2001-02-01 05:19' --user $A
|  :+    hg update -r -2
|  :+    cat chgrepo.zsh | sort | grep 'c' > clines.lst
|  :+    hg commit -A -m 'Added clines.lst' \
|  :+        --date '2001-02-01 14:56' --user $B
|  :+    hg tag clines \
|  :+        --date '2001-02-01 14:56:52' --user $B
|  :+    hg update A
|  :+    hg merge -r B
|  :+    hg commit -m 'Merge from B' \
|  :+        --date '2002-01-01 00:00' --user $C
|  :+    hg merge -r clines
|  :+    hg commit -m 'Merge from C:2' \
|  :+        --date '2002-01-01 00:00:15' --user $C
|  :+    hg update default
|  :+    hg merge -r blines
|  :+    hg commit -m 'Merge from C:1' \
|  :+        --date '2002-01-01 00:00:30' --user $C
|  :+    hg merge -r A
|  :+    hg commit -m 'Merge from A' \
|  :+        --date '2002-01-01 00:00:45' --user $C
|  :+    hg cp hglines.lst hglines2.lst
|  :+    hg commit -A -m 'Copied “hglines.lst” to “hglines2.lst”' \
|  :+        --date '2002-02-10 05:00' --user $A
|  :+    cat chgrepo.zsh | perl -p -i -e 'undef $_ if /^    hg /' > nohglines.lst
|  :+    hg commit -A -m 'Added nohglines.lst' \
|  :+        --date '2002-02-10 15:33' --user $B
|  :+    cat nohglines.lst | rev > nohglinesrev.lst
|  :+    hg commit -A -m 'Added nohglinesrev.lst' \
|  :+        --date '2002-02-10 16:01' --user $B
|  :+    seq 1 10 | tr ' ' $'\n' > ignored10.lst
|  :+    hg commit -A -m 'Added ignored10.lst' \
|  :+        --date '2002-02-11 03:15' --user $A
|  :+    echo $'syntax: glob\nignored*' > .hgignore
|  :+    hg commit -A -m 'Added .hgignore' \
|  :+        --date '2002-02-11 05:43' --user $A
|  :+    echo abc >> nohglinesrev.lst
|  :+    echo 'Def' > addeddef && hg add addeddef
|  :+    hg rm hglines2.lst
|  :+    rm nohglines.lst
|  :+    cat hglines.lst | rev > hglinesrev.lst
|  :+    echo 'Abc' > ignoredabc
|  :+)
|  :+tar cJf testrepo.tar.xz testrepo
|  :
